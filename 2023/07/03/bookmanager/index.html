<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="基于Java Swing图书管理系统, Spicy-pig">
    <meta name="description" content="1. 项目概述1.1 项目结构：
用户注册

用户登录

用户管理员操作界面


用户








管理员




1.2 E—R图user




book




book_type






borrowdetail





">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>基于Java Swing图书管理系统 | Spicy-pig</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Spicy-pig</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Spicy-pig</div>
        <div class="logo-desc">
            
            在小小的花园里面挖呀挖呀挖...
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/pigcct" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/pigcct" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/21.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">基于Java Swing图书管理系统</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Swing/">
                                <span class="chip bg-color">Swing</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Java/" class="post-category">
                                Java
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-07-03
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="1-项目概述"><a href="#1-项目概述" class="headerlink" title="1. 项目概述"></a>1. 项目概述</h2><h3 id="1-1-项目结构："><a href="#1-1-项目结构：" class="headerlink" title="1.1 项目结构："></a>1.1 项目结构：</h3><ul>
<li><p>用户注册</p>
</li>
<li><p>用户登录</p>
</li>
<li><p>用户管理员操作界面</p>
</li>
</ul>
<p><strong>用户</strong></p>
<img src="/2023/07/03/bookmanager/1.png" class="">







<p><strong>管理员</strong></p>
<img src="/2023/07/03/bookmanager/2.png" class="">



<h3 id="1-2-E—R图"><a href="#1-2-E—R图" class="headerlink" title="1.2 E—R图"></a>1.2 E—R图</h3><p><strong>user</strong></p>
<img src="/2023/07/03/bookmanager/3.png" class="">



<p><strong>book</strong></p>
<img src="/2023/07/03/bookmanager/4.png" class="">



<p><strong>book_type</strong></p>
<img src="/2023/07/03/bookmanager/5.png" class="">





<p><strong>borrowdetail</strong></p>
<img src="/2023/07/03/bookmanager/6.png" class="">







<h2 id="2-项目环境搭建"><a href="#2-项目环境搭建" class="headerlink" title="2. 项目环境搭建"></a>2. 项目环境搭建</h2><h3 id="2-1-确定项目开发环境"><a href="#2-1-确定项目开发环境" class="headerlink" title="2.1 确定项目开发环境"></a>2.1 确定项目开发环境</h3><p><strong>操作系统：window 10</strong></p>
<p><strong>Java开发包：jdk18</strong></p>
<p><strong>数据库：mysql 8.0(Navicate)</strong></p>
<p><strong>开发工具：IntelliJ IDEA 2022.2.2</strong></p>
<h3 id="2-2-创建数据库"><a href="#2-2-创建数据库" class="headerlink" title="2.2 创建数据库"></a>2.2 创建数据库</h3><p>在Navicat中连接MySQL数据库后新建数据库mybookmanager，并在该数据库中建立相应的表</p>
<h3 id="2-3-引入jar包"><a href="#2-3-引入jar包" class="headerlink" title="2.3 引入jar包"></a>2.3 引入jar包</h3><img src="/2023/07/03/bookmanager/11.png" class="">





<h3 id="2-4-创建包目录结构"><a href="#2-4-创建包目录结构" class="headerlink" title="2.4 创建包目录结构"></a>2.4 创建包目录结构</h3><img src="/2023/07/03/bookmanager/12.png" class="">

<ul>
<li>dao包下的java文件为与数据库进行交互的类</li>
<li>Jframe包下的java文件为UI界面</li>
<li>model包下的java文件为实体类</li>
<li>utils包中的类为项目中所用到的工具类</li>
</ul>
<h2 id="3-数据库设计"><a href="#3-数据库设计" class="headerlink" title="3. 数据库设计"></a>3. 数据库设计</h2><p><strong>数据库名：mybookmanager</strong></p>
<p><strong>字符集：utf-8</strong></p>
<p><strong>端口号：3306</strong></p>
<p><strong>user</strong></p>
<img src="/2023/07/03/bookmanager/7.png" class="">



<p><strong>book</strong></p>
<img src="/2023/07/03/bookmanager/8.png" class="">



<p><strong>book_type</strong></p>
<img src="/2023/07/03/bookmanager/9.png" class="">



<p><strong>borrowdetail</strong></p>
<img src="/2023/07/03/bookmanager/10.png" class="">



<p><strong>建表以及插入语句</strong></p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">&#x2F;*
 Navicat Premium Data Transfer

 Source Server         : Java
 Source Server Type    : MySQL
 Source Server Version : 80026 (8.0.26)
 Source Host           : localhost:3306
 Source Schema         : bookmanager

 Target Server Type    : MySQL
 Target Server Version : 80026 (8.0.26)
 File Encoding         : 65001

 Date: 04&#x2F;07&#x2F;2023 12:34:07
*&#x2F;

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS &#x3D; 0;

-- ----------------------------
-- Table structure for book
-- ----------------------------
DROP TABLE IF EXISTS &#96;book&#96;;
CREATE TABLE &#96;book&#96;  (
  &#96;id&#96; int NOT NULL AUTO_INCREMENT,
  &#96;book_name&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  &#96;tyPE_id&#96; int NULL DEFAULT NULL,
  &#96;author&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  &#96;publish&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  &#96;PRice&#96; double(10, 2) NULL DEFAULT NULL,
  &#96;number&#96; int NULL DEFAULT NULL,
  &#96;status&#96; int NULL DEFAULT 1 COMMENT &#39;状态 1上架0下架&#39;,
  &#96;remark&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (&#96;id&#96;) USING BTREE
) ENGINE &#x3D; InnoDB AUTO_INCREMENT &#x3D; 17 CHARACTER SET &#x3D; utf8 COLLATE &#x3D; utf8_general_ci ROW_FORMAT &#x3D; COMPACT;

-- ----------------------------
-- Records of book
-- ----------------------------
INSERT INTO &#96;book&#96; VALUES (1, &#39;Java核心技术&#39;, 1, &#39;霍斯特曼&#39;, &#39;人民邮电出版社&#39;, 69.00, 16, 1, &#39;Java基础教学&#39;);
INSERT INTO &#96;book&#96; VALUES (2, &#39;Tomcat与Java web&#39;, 1, &#39;孙卫琴&#39;, &#39;人民邮电出版社&#39;, 119.00, 16, 1, &#39;javaweb教学&#39;);
INSERT INTO &#96;book&#96; VALUES (3, &#39;;mySQL基础教程&#39;, 1, &#39;西泽梦路&#39;, &#39;人民邮电出版社&#39;, 129.00, 16, 1, &#39;MySQL基础教学&#39;);
INSERT INTO &#96;book&#96; VALUES (4, &#39;西游记&#39;, 3, &#39;吴承恩&#39;, &#39;机械工业出版社&#39;, 23.00, 213, 1, &#39;四大名著之一&#39;);
INSERT INTO &#96;book&#96; VALUES (6, &#39;SpringCloud微服务架构开发&#39;, 1, &#39;黑马程序员&#39;, &#39;人民邮电出版社&#39;, 28.00, 20, 1, &#39;微服务实战开发&#39;);
INSERT INTO &#96;book&#96; VALUES (7, &#39;水浒传&#39;, 3, &#39;施耐庵 &#39;, &#39;人民文学出版社&#39;, 29.00, 30, 1, &#39;四大名著之一&#39;);
INSERT INTO &#96;book&#96; VALUES (16, &#39;jspringboot&#39;, 4, &#39;cc&#39;, &#39;xx&#39;, 5.20, 1000, 1, &#39;springboot&#39;);

-- ----------------------------
-- Table structure for book_type
-- ----------------------------
DROP TABLE IF EXISTS &#96;book_type&#96;;
CREATE TABLE &#96;book_type&#96;  (
  &#96;id&#96; int NOT NULL AUTO_INCREMENT,
  &#96;type_name&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  &#96;remark&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (&#96;id&#96;) USING BTREE
) ENGINE &#x3D; InnoDB AUTO_INCREMENT &#x3D; 5 CHARACTER SET &#x3D; utf8 COLLATE &#x3D; utf8_general_ci ROW_FORMAT &#x3D; COMPACT;

-- ----------------------------
-- Records of book_type
-- ----------------------------
INSERT INTO &#96;book_type&#96; VALUES (1, &#39;技术&#39;, &#39;技术hhh&#39;);
INSERT INTO &#96;book_type&#96; VALUES (2, &#39;人文&#39;, &#39;人文类&#39;);
INSERT INTO &#96;book_type&#96; VALUES (3, &#39;小说&#39;, &#39;人生情感小说&#39;);
INSERT INTO &#96;book_type&#96; VALUES (4, &#39;科技类&#39;, &#39;科技类&#39;);

-- ----------------------------
-- Table structure for borrowdetail
-- ----------------------------
DROP TABLE IF EXISTS &#96;borrowdetail&#96;;
CREATE TABLE &#96;borrowdetail&#96;  (
  &#96;id&#96; int NOT NULL AUTO_INCREMENT,
  &#96;user_id&#96; int NOT NULL,
  &#96;book_id&#96; int NOT NULL,
  &#96;status&#96; int NOT NULL COMMENT &#39;状态  1在借2已还&#39;,
  &#96;borrow_time&#96; bigint NULL DEFAULT NULL,
  &#96;return_time&#96; bigint NULL DEFAULT NULL,
  PRIMARY KEY (&#96;id&#96;) USING BTREE
) ENGINE &#x3D; InnoDB AUTO_INCREMENT &#x3D; 30 CHARACTER SET &#x3D; utf8 COLLATE &#x3D; utf8_general_ci ROW_FORMAT &#x3D; COMPACT;

-- ----------------------------
-- Records of borrowdetail
-- ----------------------------
INSERT INTO &#96;borrowdetail&#96; VALUES (1, 1, 2, 2, 1546414916391, 1546414948498);
INSERT INTO &#96;borrowdetail&#96; VALUES (2, 1, 3, 2, 1546414932877, 1556417443285);
INSERT INTO &#96;borrowdetail&#96; VALUES (3, 1, 2, 2, 1546416530026, 1546416640210);
INSERT INTO &#96;borrowdetail&#96; VALUES (4, 1, 1, 2, 1546565100120, 1556334334816);
INSERT INTO &#96;borrowdetail&#96; VALUES (5, 1, 4, 2, 1546565102870, 1688392384101);
INSERT INTO &#96;borrowdetail&#96; VALUES (6, 3, 1, 2, 1546565519776, 1556207839074);
INSERT INTO &#96;borrowdetail&#96; VALUES (7, 3, 4, 1, 1546565522374, NULL);
INSERT INTO &#96;borrowdetail&#96; VALUES (8, 1, 1, 2, 1556427836809, 1688392380686);
INSERT INTO &#96;borrowdetail&#96; VALUES (9, 4, 3, 1, 1556433544156, NULL);
INSERT INTO &#96;borrowdetail&#96; VALUES (10, 7, 5, 1, 1556503388763, NULL);
INSERT INTO &#96;borrowdetail&#96; VALUES (11, 8, 5, 2, 1556507260569, 1556507349243);
INSERT INTO &#96;borrowdetail&#96; VALUES (27, 1, 6, 1, 1688389422921, NULL);
INSERT INTO &#96;borrowdetail&#96; VALUES (28, 1, 4, 1, 1688429793391, NULL);
INSERT INTO &#96;borrowdetail&#96; VALUES (29, 1, 2, 1, 1688445082661, NULL);

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS &#96;user&#96;;
CREATE TABLE &#96;user&#96;  (
  &#96;id&#96; int NOT NULL AUTO_INCREMENT,
  &#96;username&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  &#96;password&#96; varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  &#96;role&#96; int NULL DEFAULT NULL COMMENT &#39;角色  1学生 2管理员&#39;,
  &#96;sex&#96; varchar(1) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  &#96;phone&#96; char(11) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (&#96;id&#96;) USING BTREE
) ENGINE &#x3D; InnoDB AUTO_INCREMENT &#x3D; 17 CHARACTER SET &#x3D; utf8 COLLATE &#x3D; utf8_general_ci ROW_FORMAT &#x3D; COMPACT;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO &#96;user&#96; VALUES (1, &#39;xx&#39;, &#39;111111&#39;, 1, &#39;男&#39;, &#39;13195648799&#39;);
INSERT INTO &#96;user&#96; VALUES (2, &#39;admin&#39;, &#39;111111&#39;, 2, &#39;男&#39;, &#39;13198645975&#39;);
INSERT INTO &#96;user&#96; VALUES (3, &#39;徐某人&#39;, &#39;xkj123&#39;, 1, &#39;女&#39;, &#39;13195648529&#39;);
INSERT INTO &#96;user&#96; VALUES (4, &#39;肖淼&#39;, &#39;sDF78978&#39;, 1, &#39;女&#39;, &#39;13195698458&#39;);
INSERT INTO &#96;user&#96; VALUES (12, &#39;1111&#39;, &#39;1111yyyy&#39;, 1, &#39;男&#39;, &#39;15076281789&#39;);
INSERT INTO &#96;user&#96; VALUES (13, &#39;11&#39;, &#39;15076281789yy&#39;, 1, &#39;男&#39;, &#39;15076281789&#39;);
INSERT INTO &#96;user&#96; VALUES (14, &#39;222&#39;, &#39;15076281789yy&#39;, 1, &#39;男&#39;, &#39;15076281789&#39;);
INSERT INTO &#96;user&#96; VALUES (15, &#39;xxn&#39;, &#39;12345yyy&#39;, 1, &#39;男&#39;, &#39;15076281789&#39;);
INSERT INTO &#96;user&#96; VALUES (16, &#39;xxx&#39;, &#39;12345678yy&#39;, 2, &#39;男&#39;, &#39;15076281789&#39;);

SET FOREIGN_KEY_CHECKS &#x3D; 1;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>







<h2 id="4-实体类设计-model"><a href="#4-实体类设计-model" class="headerlink" title="4. 实体类设计(model)"></a>4. 实体类设计(model)</h2><h3 id="4-1-User"><a href="#4-1-User" class="headerlink" title="4.1 User"></a>4.1 User</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.model;

&#x2F;&#x2F; 用户类
public class User &#123;
	private Integer userId;  &#x2F;&#x2F; 用户id
	private String userName; &#x2F;&#x2F; 用户名
	private String password; &#x2F;&#x2F; 密码
	private Integer role;	 &#x2F;&#x2F;用户角色  1普通  2管理员
	private String sex;		&#x2F;&#x2F; 用户性别
	private String phone;   &#x2F;&#x2F; 用户手机号

	&#x2F;**
	 * 获取
	 * @return userId
	 *&#x2F;
	public Integer getUserId() &#123;
		return userId;
	&#125;

	&#x2F;**
	 * 设置
	 * @param userId
	 *&#x2F;
	public void setUserId(Integer userId) &#123;
		this.userId &#x3D; userId;
	&#125;

	&#x2F;**
	 * 获取
	 * @return userName
	 *&#x2F;
	public String getUserName() &#123;
		return userName;
	&#125;

	&#x2F;**
	 * 设置
	 * @param userName
	 *&#x2F;
	public void setUserName(String userName) &#123;
		this.userName &#x3D; userName;
	&#125;

	&#x2F;**
	 * 获取
	 * @return password
	 *&#x2F;
	public String getPassword() &#123;
		return password;
	&#125;

	&#x2F;**
	 * 设置
	 * @param password
	 *&#x2F;
	public void setPassword(String password) &#123;
		this.password &#x3D; password;
	&#125;

	&#x2F;**
	 * 获取
	 * @return role
	 *&#x2F;
	public Integer getRole() &#123;
		return role;
	&#125;

	&#x2F;**
	 * 设置
	 * @param role
	 *&#x2F;
	public void setRole(Integer role) &#123;
		this.role &#x3D; role;
	&#125;

	&#x2F;**
	 * 获取
	 * @return sex
	 *&#x2F;
	public String getSex() &#123;
		return sex;
	&#125;

	&#x2F;**
	 * 设置
	 * @param sex
	 *&#x2F;
	public void setSex(String sex) &#123;
		this.sex &#x3D; sex;
	&#125;

	&#x2F;**
	 * 获取
	 * @return phone
	 *&#x2F;
	public String getPhone() &#123;
		return phone;
	&#125;

	&#x2F;**
	 * 设置
	 * @param phone
	 *&#x2F;
	public void setPhone(String phone) &#123;
		this.phone &#x3D; phone;
	&#125;

	public String toString() &#123;
		return &quot;User&#123;userId &#x3D; &quot; + userId +
				&quot;, userName &#x3D; &quot; + userName +
				&quot;, password &#x3D; &quot; + password +
				&quot;, role &#x3D; &quot; + role +
				&quot;, sex &#x3D; &quot; + sex +
				&quot;, phone &#x3D; &quot; + phone +
				&quot;&#125;&quot;;
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="4-2-Book"><a href="#4-2-Book" class="headerlink" title="4.2 Book"></a>4.2 Book</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.model;

&#x2F;&#x2F; 图书类
public class Book &#123;
	private Integer bookId;
	private String bookName;
	private String author;
	private Integer status;&#x2F;&#x2F;状态 1上架  2下架
	private Integer bookTypeId;
	private String publish;
	private Integer number;&#x2F;&#x2F; 库存数量
	private double price;
	private String remark;

	&#x2F;**
	 * 获取
	 * @return bookId
	 *&#x2F;
	public Integer getBookId() &#123;
		return bookId;
	&#125;

	&#x2F;**
	 * 设置
	 * @param bookId
	 *&#x2F;
	public void setBookId(Integer bookId) &#123;
		this.bookId &#x3D; bookId;
	&#125;

	&#x2F;**
	 * 获取
	 * @return bookName
	 *&#x2F;
	public String getBookName() &#123;
		return bookName;
	&#125;

	&#x2F;**
	 * 设置
	 * @param bookName
	 *&#x2F;
	public void setBookName(String bookName) &#123;
		this.bookName &#x3D; bookName;
	&#125;

	&#x2F;**
	 * 获取
	 * @return author
	 *&#x2F;
	public String getAuthor() &#123;
		return author;
	&#125;

	&#x2F;**
	 * 设置
	 * @param author
	 *&#x2F;
	public void setAuthor(String author) &#123;
		this.author &#x3D; author;
	&#125;

	&#x2F;**
	 * 获取
	 * @return status
	 *&#x2F;
	public Integer getStatus() &#123;
		return status;
	&#125;

	&#x2F;**
	 * 设置
	 * @param status
	 *&#x2F;
	public void setStatus(Integer status) &#123;
		this.status &#x3D; status;
	&#125;

	&#x2F;**
	 * 获取
	 * @return bookTypeId
	 *&#x2F;
	public Integer getBookTypeId() &#123;
		return bookTypeId;
	&#125;

	&#x2F;**
	 * 设置
	 * @param bookTypeId
	 *&#x2F;
	public void setBookTypeId(Integer bookTypeId) &#123;
		this.bookTypeId &#x3D; bookTypeId;
	&#125;

	&#x2F;**
	 * 获取
	 * @return publish
	 *&#x2F;
	public String getPublish() &#123;
		return publish;
	&#125;

	&#x2F;**
	 * 设置
	 * @param publish
	 *&#x2F;
	public void setPublish(String publish) &#123;
		this.publish &#x3D; publish;
	&#125;

	&#x2F;**
	 * 获取
	 * @return number
	 *&#x2F;
	public Integer getNumber() &#123;
		return number;
	&#125;

	&#x2F;**
	 * 设置
	 * @param number
	 *&#x2F;
	public void setNumber(Integer number) &#123;
		this.number &#x3D; number;
	&#125;

	&#x2F;**
	 * 获取
	 * @return price
	 *&#x2F;
	public double getPrice() &#123;
		return price;
	&#125;

	&#x2F;**
	 * 设置
	 * @param price
	 *&#x2F;
	public void setPrice(double price) &#123;
		this.price &#x3D; price;
	&#125;

	&#x2F;**
	 * 获取
	 * @return remark
	 *&#x2F;
	public String getRemark() &#123;
		return remark;
	&#125;

	&#x2F;**
	 * 设置
	 * @param remark
	 *&#x2F;
	public void setRemark(String remark) &#123;
		this.remark &#x3D; remark;
	&#125;

	public String toString() &#123;
		return &quot;Book&#123;bookId &#x3D; &quot; + bookId +
				&quot;, bookName &#x3D; &quot; + bookName +
				&quot;, author &#x3D; &quot; + author +
				&quot;, status &#x3D; &quot; + status +
				&quot;, bookTypeId &#x3D; &quot; + bookTypeId +
				&quot;, publish &#x3D; &quot; + publish +
				&quot;, number &#x3D; &quot; + number +
				&quot;, price &#x3D; &quot; + price +
				&quot;, remark &#x3D; &quot; + remark +
				&quot;&#125;&quot;;
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="4-3-BookType"><a href="#4-3-BookType" class="headerlink" title="4.3 BookType"></a>4.3 BookType</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.model;


&#x2F;&#x2F; 图书类型
public class BookType &#123;
	private Integer typeId;
	private String typeName;
	private String remark;

	&#x2F;**
	 * 获取
	 * @return typeId
	 *&#x2F;
	public Integer getTypeId() &#123;
		return typeId;
	&#125;

	&#x2F;**
	 * 设置
	 * @param typeId
	 *&#x2F;
	public void setTypeId(Integer typeId) &#123;
		this.typeId &#x3D; typeId;
	&#125;

	&#x2F;**
	 * 获取
	 * @return typeName
	 *&#x2F;
	public String getTypeName() &#123;
		return typeName;
	&#125;

	&#x2F;**
	 * 设置
	 * @param typeName
	 *&#x2F;
	public void setTypeName(String typeName) &#123;
		this.typeName &#x3D; typeName;
	&#125;

	&#x2F;**
	 * 获取
	 * @return remark
	 *&#x2F;
	public String getRemark() &#123;
		return remark;
	&#125;

	&#x2F;**
	 * 设置
	 * @param remark
	 *&#x2F;
	public void setRemark(String remark) &#123;
		this.remark &#x3D; remark;
	&#125;

	public String toString() &#123;
		return &quot;BookType&#123;typeId &#x3D; &quot; + typeId +
				&quot;, typeName &#x3D; &quot; + typeName +
				&quot;, remark &#x3D; &quot; + remark +
				&quot;&#125;&quot;;
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="4-4-BorrowDetail"><a href="#4-4-BorrowDetail" class="headerlink" title="4.4 BorrowDetail"></a>4.4 BorrowDetail</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.model;

&#x2F;&#x2F; 借阅信息
public class BorrowDetail &#123;
	private Integer borrowId;
	private Integer userId;
	private Integer bookId;
	private Integer status;&#x2F;&#x2F;状态  1在借  2已还
	private Long borrowTime;
	private Long returnTime;

	&#x2F;**
	 * 获取
	 * @return borrowId
	 *&#x2F;
	public Integer getBorrowId() &#123;
		return borrowId;
	&#125;

	&#x2F;**
	 * 设置
	 * @param borrowId
	 *&#x2F;
	public void setBorrowId(Integer borrowId) &#123;
		this.borrowId &#x3D; borrowId;
	&#125;

	&#x2F;**
	 * 获取
	 * @return userId
	 *&#x2F;
	public Integer getUserId() &#123;
		return userId;
	&#125;

	&#x2F;**
	 * 设置
	 * @param userId
	 *&#x2F;
	public void setUserId(Integer userId) &#123;
		this.userId &#x3D; userId;
	&#125;

	&#x2F;**
	 * 获取
	 * @return bookId
	 *&#x2F;
	public Integer getBookId() &#123;
		return bookId;
	&#125;

	&#x2F;**
	 * 设置
	 * @param bookId
	 *&#x2F;
	public void setBookId(Integer bookId) &#123;
		this.bookId &#x3D; bookId;
	&#125;

	&#x2F;**
	 * 获取
	 * @return status
	 *&#x2F;
	public Integer getStatus() &#123;
		return status;
	&#125;

	&#x2F;**
	 * 设置
	 * @param status
	 *&#x2F;
	public void setStatus(Integer status) &#123;
		this.status &#x3D; status;
	&#125;

	&#x2F;**
	 * 获取
	 * @return borrowTime
	 *&#x2F;
	public Long getBorrowTime() &#123;
		return borrowTime;
	&#125;

	&#x2F;**
	 * 设置
	 * @param borrowTime
	 *&#x2F;
	public void setBorrowTime(Long borrowTime) &#123;
		this.borrowTime &#x3D; borrowTime;
	&#125;

	&#x2F;**
	 * 获取
	 * @return returnTime
	 *&#x2F;
	public Long getReturnTime() &#123;
		return returnTime;
	&#125;

	&#x2F;**
	 * 设置
	 * @param returnTime
	 *&#x2F;
	public void setReturnTime(Long returnTime) &#123;
		this.returnTime &#x3D; returnTime;
	&#125;

	public String toString() &#123;
		return &quot;BorrowDetail&#123;borrowId &#x3D; &quot; + borrowId +
				&quot;, userId &#x3D; &quot; + userId +
				&quot;, bookId &#x3D; &quot; + bookId +
				&quot;, status &#x3D; &quot; + status +
				&quot;, borrowTime &#x3D; &quot; + borrowTime +
				&quot;, returnTime &#x3D; &quot; + returnTime +
				&quot;&#125;&quot;;
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>









<h2 id="5-工具类设计-utils"><a href="#5-工具类设计-utils" class="headerlink" title="5. 工具类设计(utils)"></a>5. 工具类设计(utils)</h2><h3 id="5-1-DdUtil"><a href="#5-1-DdUtil" class="headerlink" title="5.1 DdUtil"></a>5.1 DdUtil</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.utils;

import java.sql.*;

public class DbUtil &#123;
	&#x2F;&#x2F; 定义数据库连接字符串
	private String Driver &#x3D; &quot;com.mysql.cj.jdbc.Driver&quot;;	&#x2F;&#x2F; 数据库驱动
	private String Url &#x3D; &quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mybookmanager?serverTimezone&#x3D;UTC&amp;useSSL&#x3D;false&quot;;
	private String UserName &#x3D; &quot;root&quot;;
	private String Password &#x3D; &quot;******&quot;;

	&#x2F;&#x2F; 连接数据库
	public Connection getConnection()throws Exception&#123;
	    Class.forName(Driver);
		Connection con &#x3D; (Connection) DriverManager.getConnection(Url,UserName,Password);
		return con;
	&#125;

	&#x2F;&#x2F; 关闭数据库
	public void closeCon (Connection con)throws Exception &#123;
		if(con!&#x3D;null)&#123;
			con.close();
		&#125;
	&#125;

&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="5-2-ToolUtil"><a href="#5-2-ToolUtil" class="headerlink" title="5.2 ToolUtil"></a>5.2 ToolUtil</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.utils;

import java.text.SimpleDateFormat;
import java.util.Date;
import javax.servlet.http.HttpSession;

import com.hechaodong.bookmanager.model.User;

public class ToolUtil &#123;
	&#x2F;&#x2F;判断一个字符串是否为空，如果不为空则返回false，空字符串或者null返回true
	public static boolean isEmpty(String str)&#123;
		if(str !&#x3D; null &amp;&amp; !&quot;&quot;.equals(str.trim()))&#123;
			return false;
		&#125;
		return true;
	&#125;

	&#x2F;&#x2F;获取当前时间的时间戳，以毫秒为单位
	public static Long getTime()&#123;
		long time &#x3D; System.currentTimeMillis();
		return time;
	&#125;

	&#x2F;&#x2F;将给定的时间戳转换为对应的日期时间字符串，格式为&quot;yyyy-MM-dd HH:mm:ss&quot;
	public static String getDateByTime(Long time)&#123;
		SimpleDateFormat format &#x3D; new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);
		String string &#x3D; format.format(new Date(time));
		return string;
	&#125;

	&#x2F;&#x2F;从给定的HttpSession对象中获取保存的当前用户对象(User)
	public static User getUser(HttpSession session)&#123;
		User user &#x3D; (User) session.getAttribute(&quot;user&quot;);
		return user;
	&#125;

	&#x2F;&#x2F;将给定的当前用户对象(User)存储到HttpSession对象中，以便在会话期间使用
	public static void setUser(HttpSession session,User user)&#123;
		session.setAttribute(&quot;user&quot;, user);
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>











<h2 id="6-数据库交互类设计-dao"><a href="#6-数据库交互类设计-dao" class="headerlink" title="6. 数据库交互类设计(dao)"></a>6. 数据库交互类设计(dao)</h2><h3 id="6-1-UserDao"><a href="#6-1-UserDao" class="headerlink" title="6.1 UserDao"></a>6.1 UserDao</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.dao;

import java.sql.*;
import com.hechaodong.bookmanager.model.User;
import com.hechaodong.bookmanager.utils.ToolUtil;

import java.sql.ResultSet;
public class UserDao &#123;
	
	public User login(Connection con, User user)throws Exception &#123;

		&#x2F;&#x2F; 定义一个User类型的变量，用来记录查询的结果
		User resultUser &#x3D; null;

		&#x2F;&#x2F; 定义sql语句
		String sql &#x3D; &quot;select * from user where username&#x3D;? and password&#x3D;? and role &#x3D; ?&quot;;
	    PreparedStatement preparedStatement &#x3D; (PreparedStatement) con.prepareStatement(sql);
		preparedStatement.setString(1,user.getUserName());
		preparedStatement.setString(2,user.getPassword());
		preparedStatement.setInt(3,user.getRole());

		&#x2F;&#x2F; 执行查询操作
	    ResultSet rs &#x3D; preparedStatement.executeQuery();
	    if(rs.next())&#123;
	    	resultUser &#x3D; new User();
	    	resultUser.setUserId(rs.getInt(&quot;id&quot;));
	    	resultUser.setUserName(rs.getString(&quot;username&quot;));
	    	resultUser.setSex(rs.getString(&quot;sex&quot;));
	    	resultUser.setPhone(rs.getString(&quot;phone&quot;));
	    &#125;
		return resultUser;
	&#125;

	&#x2F;&#x2F; 添加用户信息
	public int addUser(Connection con, User user) throws Exception&#123;
		&#x2F;&#x2F;查询注册用户名是否存在
		String sql &#x3D; &quot;select * from user where userName&#x3D;? &quot;;
	    PreparedStatement pstmt &#x3D; (PreparedStatement) con.prepareStatement(sql);
		pstmt.setString(1,user.getUserName());
	    ResultSet rs &#x3D; pstmt.executeQuery();
	    if(rs.next())&#123;
	    	return 2;
	    &#125;

		&#x2F;&#x2F; 执行插入操作
	    String sql2&#x3D;&quot;insert into user (username,password,role,sex,phone) values (?,?,?,?,?)&quot;;
	    PreparedStatement pstmt2&#x3D;(PreparedStatement) con.prepareStatement(sql2);
		pstmt2.setString(1, user.getUserName());
		pstmt2.setString(2, user.getPassword());
		pstmt2.setInt(3, user.getRole());
		pstmt2.setString(4,user.getSex());
		pstmt2.setString(5,user.getPhone());

		return pstmt2.executeUpdate();
	&#125;
	

	&#x2F;&#x2F; 查询用户信息
	public ResultSet list(Connection con,User user)throws Exception&#123;
		StringBuffer sb&#x3D;new StringBuffer(&quot;select * from user where role &#x3D; 1&quot;);
		if(!ToolUtil.isEmpty(user.getUserName()))&#123;
			sb.append(&quot; and username like &#39;%&quot;+user.getUserName()+&quot;%&#39;&quot;);
		&#125;
		PreparedStatement pstmt&#x3D;(PreparedStatement) con.prepareStatement(sb.toString());

		return pstmt.executeQuery();
	&#125;

	&#x2F;&#x2F; 更新信息
	public int update(Connection con,User user)throws Exception&#123;
		String sql&#x3D;&quot;update user set username&#x3D;?,password&#x3D;?,sex&#x3D;?,phone&#x3D;? where id&#x3D;?&quot;;
		PreparedStatement pstmt&#x3D;(PreparedStatement) con.prepareStatement(sql);
		pstmt.setString(1, user.getUserName());
		pstmt.setString(2, user.getPassword());
		pstmt.setString(3, user.getSex());
		pstmt.setString(4, user.getPhone());
		pstmt.setInt(5, user.getUserId());

		return pstmt.executeUpdate();
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="6-2-BookDao"><a href="#6-2-BookDao" class="headerlink" title="6.2 BookDao"></a>6.2 BookDao</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.dao;

import java.sql.*;
import java.sql.ResultSet;

import com.hechaodong.bookmanager.model.Book;
import com.hechaodong.bookmanager.utils.ToolUtil;

&#x2F;&#x2F; 图书信息的增删改查操作
public class BookDao &#123;

    &#x2F;&#x2F; 图书添加
    public int add(Connection con, Book book) throws Exception &#123;
        String sql &#x3D; &quot;insert into book (book_name,type_id,author,publish,price,number,status,remark) values(?,?,?,?,?,?,?,?)&quot;;
        PreparedStatement preparedStatement &#x3D; (PreparedStatement) con.prepareStatement(sql);
        preparedStatement.setString(1, book.getBookName());&#x2F;&#x2F; 以getBookName()第一个参数添加到sql语句的第一个占位符中
        preparedStatement.setInt(2, book.getBookTypeId());
        preparedStatement.setString(3, book.getAuthor());
        preparedStatement.setString(4, book.getPublish());
        preparedStatement.setDouble(5, book.getPrice());
        preparedStatement.setInt(6, book.getNumber());
        preparedStatement.setInt(7, book.getStatus());
        preparedStatement.setString(8, book.getRemark());

        return preparedStatement.executeUpdate();
    &#125;


    &#x2F;&#x2F; 查询图书信息
    public ResultSet list(Connection con, Book book) throws Exception &#123;
        &#x2F;&#x2F; 创建StringBuffer对象，来拼接sql语句
        StringBuffer sb &#x3D; new StringBuffer(&quot;select b.*,bt.type_name from book b,book_type bt where b.type_id&#x3D;bt.id&quot;);
        if (!ToolUtil.isEmpty(book.getBookName())) &#123;
            sb.append(&quot; and b.book_name like &#39;%&quot; + book.getBookName() + &quot;%&#39;&quot;);
        &#125;
        if (!ToolUtil.isEmpty(book.getAuthor())) &#123;
            sb.append(&quot; and b.author like &#39;%&quot; + book.getAuthor() + &quot;%&#39;&quot;);
        &#125;
        if (book.getBookTypeId() !&#x3D; null &amp;&amp; book.getBookTypeId() !&#x3D; 0) &#123;
            sb.append(&quot; and b.type_id&#x3D;&quot; + book.getBookTypeId());
        &#125;
        if (book.getStatus() !&#x3D; null) &#123;
            sb.append(&quot; and b.status&#x3D;&quot; + book.getStatus());
        &#125;
        if (book.getBookId() !&#x3D; null) &#123;
            sb.append(&quot; and b.id&#x3D;&quot; + book.getBookId());
        &#125;
        sb.append(&quot; ORDER BY b.status&quot;);
        PreparedStatement preparedStatement &#x3D; (PreparedStatement) con.prepareStatement(sb.toString());

        return preparedStatement.executeQuery();

    &#125;

    &#x2F;&#x2F; 查询可借阅的图书信息
    public ResultSet listCan(Connection con, Book book) throws Exception &#123;
        StringBuffer sb &#x3D; new StringBuffer(&quot;select b.*,bt.type_name from book b,book_type bt where type_id&#x3D;bt.id and b.status &#x3D; 1&quot;);
        &#x2F;&#x2F; 字符串的拼接查询
        if (!ToolUtil.isEmpty(book.getBookName())) &#123;
            sb.append(&quot; and b.book_name like &#39;%&quot; + book.getBookName() + &quot;%&#39;&quot;);
        &#125;
        if (book.getBookId() !&#x3D; null) &#123;
            sb.append(&quot; and b.id&#x3D;&quot; + book.getBookId());
        &#125;
        PreparedStatement preparedStatement &#x3D; (PreparedStatement) con.prepareStatement(sb.toString());

        return preparedStatement.executeQuery();
    &#125;


    &#x2F;&#x2F; 图书信息删除
    public int delete(Connection con, String id) throws Exception &#123;
        String sql &#x3D; &quot;delete from book where id&#x3D;?&quot;;
        PreparedStatement preparedStatement &#x3D; (PreparedStatement) con.prepareStatement(sql);
        preparedStatement.setString(1, id);

        return preparedStatement.executeUpdate();
    &#125;

    &#x2F;&#x2F; 图书信息修改
    public int update(Connection con, Book book) throws Exception &#123;
        String sql &#x3D; &quot;update book set book_name&#x3D;?,type_id&#x3D;?,author&#x3D;?,publish&#x3D;?,price&#x3D;?,number&#x3D;?,status&#x3D;?,remark&#x3D;? where id&#x3D;?&quot;;
        PreparedStatement statement &#x3D; con.prepareStatement(sql);
        statement.setString(1, book.getBookName());
        statement.setInt(2, book.getBookTypeId());
        statement.setString(3, book.getAuthor());
        statement.setString(4, book.getPublish());
        statement.setDouble(5, book.getPrice());
        statement.setInt(6, book.getNumber());
        statement.setInt(7, book.getStatus());
        statement.setString(8, book.getRemark());
        statement.setInt(9, book.getBookId());

        return statement.executeUpdate();
    &#125;

&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="6-3-BookTypeDao"><a href="#6-3-BookTypeDao" class="headerlink" title="6.3 BookTypeDao"></a>6.3 BookTypeDao</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import com.hechaodong.bookmanager.model.BookType;
import com.hechaodong.bookmanager.utils.ToolUtil;

public class BookTypeDao &#123;
	
	&#x2F;&#x2F; 图书类别添加
	public int add(Connection con,BookType bookType)throws Exception&#123;
		&#x2F;&#x2F; 先查询是否有一样的类别名
		String sql&#x3D;&quot;select * from book_type where type_name &#x3D; ?&quot;;
		PreparedStatement preparedStatement&#x3D;con.prepareStatement(sql);
		preparedStatement.setString(1, bookType.getTypeName());
		ResultSet resultSet &#x3D; preparedStatement.executeQuery();
		while(resultSet.next())&#123;
			&#x2F;*
			* 遍历结果集
			* 如果结果集中有记录，则表示已存在相同名称的图书类型，那么立即返回数字 2，表示添加失败
			* *&#x2F;
			return 2;
		&#125;

		&#x2F;&#x2F; 完成类别数据的插入操作
		sql&#x3D;&quot;insert into book_type (type_name,remark) values(?,?)&quot;;
		PreparedStatement statement&#x3D;con.prepareStatement(sql);
		statement.setString(1, bookType.getTypeName());
		statement.setString(2, bookType.getRemark());

		return statement.executeUpdate();
	&#125;

	&#x2F;&#x2F; 查询图书类别集合
	public ResultSet list(Connection con,BookType bookType)throws Exception&#123;
		StringBuffer sb&#x3D;new StringBuffer(&quot;select * from book_type&quot;);
		&#x2F;&#x2F; 判断传入的图书类型对象 bookType 的名称是否为空
		if(!ToolUtil.isEmpty(bookType.getTypeName()))&#123;
			sb.append(&quot; and type_name like &#39;%&quot;+bookType.getTypeName()+&quot;%&#39;&quot;);
		&#125;
		PreparedStatement preparedStatement&#x3D;con.prepareStatement(sb.toString().replaceFirst(&quot;and&quot;, &quot;where&quot;));

		return preparedStatement.executeQuery();
	&#125;
	
	&#x2F;&#x2F; 删除图书类别
	public int delete(Connection con,String id)throws Exception&#123;
		&#x2F;&#x2F;先查询该类别下是否有书籍
		String sql&#x3D;&quot;select b.* from book b left join book_type bt on b.type_id &#x3D; bt.id where bt.id &#x3D;? &quot;;
		PreparedStatement preparedStatement&#x3D;con.prepareStatement(sql);
		preparedStatement.setString(1, id);
		ResultSet query &#x3D; preparedStatement.executeQuery();&#x2F;&#x2F; 查询操作
		int number &#x3D;0;
		while(query.next())&#123;
			number++;
		&#125;
		if(number &gt; 0)&#123; &#x2F;&#x2F; 表示该类别下存在书籍，那么立即返回数字 3，表示删除失败
			return 3;
		&#125;
		
		&#x2F;&#x2F;判断类别总数是否大于1
		sql&#x3D;&quot;select * from book_type&quot;;
		PreparedStatement pstmt2&#x3D;con.prepareStatement(sql);
		ResultSet resultSet &#x3D; pstmt2.executeQuery();
		int count &#x3D; 0;
		while(resultSet.next())&#123;
			count++;
		&#125;
		if(count&lt;2)&#123; &#x2F;&#x2F; 如果计数器 count 的值小于 2，表示图书类型的总数小于 2，即只有一个类别，那么立即返回数字 2，表示删除失败
			return 2;
		&#125;
		sql&#x3D;&quot;delete from book_type where id&#x3D;?&quot;;
		PreparedStatement pstmt3&#x3D;con.prepareStatement(sql);
		pstmt3.setString(1, id);

		return pstmt3.executeUpdate();
	&#125;
	
	&#x2F;&#x2F; 更新图示类别
	public int update(Connection con,BookType bookType)throws Exception&#123;
		String sql&#x3D;&quot;update book_type set type_name&#x3D;?,remark&#x3D;? where id&#x3D;?&quot;;
		PreparedStatement pstmt&#x3D;con.prepareStatement(sql);
		pstmt.setString(1, bookType.getTypeName());
		pstmt.setString(2, bookType.getRemark());
		pstmt.setInt(3, bookType.getTypeId());

		return pstmt.executeUpdate();
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="6-4-BorrowDetailDao"><a href="#6-4-BorrowDetailDao" class="headerlink" title="6.4 BorrowDetailDao"></a>6.4 BorrowDetailDao</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.dao;

import java.sql.*;
import java.sql.ResultSet;
import com.hechaodong.bookmanager.model.BorrowDetail;

public class BorrowDetailDao &#123;

	public ResultSet list(Connection con,BorrowDetail borrowDetail)throws Exception&#123;

		&#x2F;&#x2F; 创建一个SrtingBuffer,用来拼接sql语句
		StringBuffer sb&#x3D;new StringBuffer(&quot;SELECT bd.*,u.username,b.book_name from borrowdetail bd,user u,book b where u.id&#x3D;bd.user_id and b.id&#x3D;bd.book_id&quot;);
		&#x2F;&#x2F;根据查询语句进行sql语句的拼接操作
		if(borrowDetail.getUserId() !&#x3D; null)&#123;
			sb.append(&quot; and u.id &#x3D; ?&quot;);
		&#125;
		if(borrowDetail.getStatus() !&#x3D; null)&#123;
			sb.append(&quot; and bd.status &#x3D; ?&quot;);
		&#125;
		if(borrowDetail.getBookId() !&#x3D; null)&#123;
			sb.append(&quot; and bd.book_id &#x3D; ?&quot;);
		&#125;
		sb.append(&quot;  order by bd.id&quot;);

		PreparedStatement prepareStatement&#x3D;(PreparedStatement) con.prepareStatement(sb.toString());
		if(borrowDetail.getUserId() !&#x3D; null)&#123;
			prepareStatement.setInt(1, borrowDetail.getUserId());
		&#125;
		if(borrowDetail.getStatus() !&#x3D; null &amp;&amp; borrowDetail.getBookId() !&#x3D; null)&#123;
			prepareStatement.setInt(2, borrowDetail.getStatus());
			prepareStatement.setInt(3, borrowDetail.getBookId());
		&#125;

		&#x2F;&#x2F; 执行sql语句
		return prepareStatement.executeQuery();
	&#125;

	&#x2F;&#x2F; 添加借阅明细信息
	public int add(Connection con, BorrowDetail borrowDetail) throws Exception &#123;
		String sql &#x3D; &quot;insert into borrowdetail (user_id,book_id,status,borrow_time) values (?,?,?,?)&quot;;
		PreparedStatement preparedStatement&#x3D;(PreparedStatement) con.prepareStatement(sql);
		preparedStatement.setInt(1, borrowDetail.getUserId());
		preparedStatement.setInt(2, borrowDetail.getBookId());
		preparedStatement.setInt(3, borrowDetail.getStatus());
		preparedStatement.setLong(4, borrowDetail.getBorrowTime());
		return preparedStatement.executeUpdate();
	&#125;

	&#x2F;&#x2F; 还书
	public int returnBook(Connection con,BorrowDetail detail)throws Exception &#123;
		String sql &#x3D; &quot;update borrowdetail set status &#x3D; ? ,return_time &#x3D; ? where id &#x3D; ?&quot;;
		PreparedStatement preparedStatement&#x3D;(PreparedStatement) con.prepareStatement(sql);
		preparedStatement.setInt(1, detail.getStatus());
		preparedStatement.setLong(2, detail.getReturnTime());
		preparedStatement.setInt(3, detail.getBorrowId());

		return preparedStatement.executeUpdate();
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="7-用户登录和注册模块"><a href="#7-用户登录和注册模块" class="headerlink" title="7.  用户登录和注册模块"></a>7.  用户登录和注册模块</h2><h3 id="7-1-用户注册"><a href="#7-1-用户注册" class="headerlink" title="7.1 用户注册"></a>7.1 用户注册</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.awt.*;
import java.sql.*;
import javax.swing.*;

import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;

import com.hechaodong.bookmanager.dao.UserDao;

import com.hechaodong.bookmanager.model.User;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;


&#x2F;&#x2F; 用户注册界面
&#x2F;&#x2F; 密码校验的正则表达式： ^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]&#123;6,16&#125;$
&#x2F;&#x2F; 手机号校验的正则表达式：^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d&#123;8&#125;$
public class RegFrm extends JFrame &#123;

    private JFrame jf;                          &#x2F;&#x2F;用户注册的窗体组件
    private JLabel label;                       &#x2F;&#x2F;展示“用户名”的JLabel
    private JTextField textField;               &#x2F;&#x2F;输入用户名所对应的文本框
    private JLabel label_1;                     &#x2F;&#x2F; 展示“密码”的JLabel
    private JTextField textField_1;             &#x2F;&#x2F;输入密码的文本框
    private JLabel label_2;                     &#x2F;&#x2F;展示“手机号”的JLabel
    private JTextField textField_2;             &#x2F;&#x2F;输入手机号所对应的文本框
    private JLabel label_3;                     &#x2F;&#x2F;展示“性别”的JLabel

    private JRadioButton rdbtnNewRadioButton;   &#x2F;&#x2F;性别男
    private JRadioButton rdbtnNewRadioButton_1; &#x2F;&#x2F;性别女

    private JLabel usernameMes;                 &#x2F;&#x2F;用户名校验结果对应的提示框
    private JLabel passwordMes;                 &#x2F;&#x2F;密码校验结果对应的提示框
    private JLabel phoneMes;                    &#x2F;&#x2F;手机号校验结果对应的提示框

    private JLabel label_4;                     &#x2F;&#x2F;展示“验证码”的JLabel
    private JTextField textField_3;             &#x2F;&#x2F;输入验证码所对应的文本框
    private ValidCode vcode;                    &#x2F;&#x2F;展示验证码的图片框
    private JButton button;                     &#x2F;&#x2F;注册按钮
    private JButton button_1;                   &#x2F;&#x2F;前往登录按钮

    private JLabel lblNewLabel;                 &#x2F;&#x2F; 背景图片
    private JLabel lblNewLabel_1;               &#x2F;&#x2F; 用户注册

    &#x2F;&#x2F; 创建UserDao对象
    private DbUtil dbUtil &#x3D; new DbUtil();
    private UserDao userDao &#x3D; new UserDao();

    public RegFrm() &#123;
        &#x2F;&#x2F; 初始化窗体
        jf &#x3D; new JFrame(&quot;用户注册&quot;);
        jf.getContentPane().setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 16));
        jf.setBounds(650, 250, 640, 960);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.getContentPane().setLayout(null);

        &#x2F;&#x2F; 初始化展示“用户名”的JLabel
        label &#x3D; new JLabel(&quot;用户名：&quot;);
        label.setForeground(Color.BLACK);
        label.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 24));
        label.setBounds(110, 202, 100, 40);
        jf.getContentPane().add(label);

        &#x2F;&#x2F; 初始化用户名的文本框组件
        textField &#x3D; new JTextField();
        textField.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        textField.setForeground(Color.BLACK);
        textField.setColumns(10);
        textField.setBounds(202, 202, 164, 30);
        jf.getContentPane().add(textField);

        &#x2F;&#x2F; 添加焦点事件监听器，当失去焦点的时候需要对用户的用户名进行校验
        textField.addFocusListener(new FocusListener() &#123;
            @Override
            public void focusGained(FocusEvent e) &#123;
            &#125;
            @Override
            public void focusLost(FocusEvent e) &#123;        &#x2F;&#x2F; 用户名校验
                String text &#x3D; textField.getText();
                if (ToolUtil.isEmpty(text)) &#123;
                    usernameMes.setText(&quot;用户名不能为空&quot;);
                    usernameMes.setForeground(Color.RED);
                &#125; else &#123;
                    usernameMes.setText(&quot;√&quot;);
                    usernameMes.setForeground(Color.GREEN);
                &#125;
            &#125;
        &#125;);

        &#x2F;&#x2F; 初始化展示“密码”的JLabel
        label_1 &#x3D; new JLabel(&quot;密码：&quot;);
        label_1.setForeground(Color.BLACK);
        label_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 24));
        label_1.setBounds(130, 252, 100, 40);
        jf.getContentPane().add(label_1);

        &#x2F;&#x2F; 初始化密码的文本框组件
        textField_1 &#x3D; new JTextField();
        textField_1.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
        textField_1.setToolTipText(&quot;&quot;);
        textField_1.setColumns(10);
        textField_1.setBounds(202, 262, 164, 30);
        jf.getContentPane().add(textField_1);

        &#x2F;&#x2F; 添加焦点事件监听器，当失去焦点的时候需要对用户的密码进行校验
        textField_1.addFocusListener(new FocusListener() &#123;
            @Override
            public void focusLost(FocusEvent e) &#123;
                String pwd &#x3D; textField_1.getText();
                if (ToolUtil.isEmpty(pwd)) &#123;
                    passwordMes.setText(&quot;密码不能为空&quot;);
                    passwordMes.setForeground(Color.RED);
                &#125; else &#123;
                    &#x2F;* 正则表达式
                    * 1. ^(?! [0-9]+$)：以任意字符开头，后面不能全部是数字。
                    * 2. (?![a-zA-Z]+$)：后面不能全部是字母。
                    * 3. [0-9A-Za-z]&#123;6,16&#125;：包含6-16位数字和字母的组合。
                    * 4. $：以任意字符结尾。
                    * *&#x2F;
                    boolean flag &#x3D; pwd.matches(&quot;^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]&#123;6,16&#125;$&quot;);
                    if (flag) &#123;
                        passwordMes.setText(&quot;√&quot;);
                        passwordMes.setForeground(Color.GREEN);
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;密码需为6-16位数字和字母的组合&quot;);
                        passwordMes.setText(&quot;&quot;);
                    &#125;
                &#125;
            &#125;

            @Override
            public void focusGained(FocusEvent e) &#123;
            &#125;

        &#125;);

        &#x2F;&#x2F; 初始化展示“手机号”的JLabel
        label_2 &#x3D; new JLabel(&quot;手机号：&quot;);
        label_2.setForeground(Color.BLACK);
        label_2.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 24));
        label_2.setBounds(110, 302, 100, 60);
        jf.getContentPane().add(label_2);

        &#x2F;&#x2F; 初始化手机号的文本框组件
        textField_2 &#x3D; new JTextField();
        textField_2.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
        textField_2.setColumns(10);
        textField_2.setBounds(202, 320, 164, 30);
        jf.getContentPane().add(textField_2);

        &#x2F;&#x2F; 添加焦点事件监听器，当失去焦点的时候需要对用户的手机号进行校验
        textField_2.addFocusListener(new FocusListener() &#123;

            @Override
            public void focusLost(FocusEvent e) &#123;
                String phone &#x3D; textField_2.getText();
                if (ToolUtil.isEmpty(phone)) &#123;
                    phoneMes.setText(&quot;手机号不能为空&quot;);
                    phoneMes.setForeground(Color.RED);
                &#125; else &#123;
                    &#x2F;*
                      1. ^：以任意字符开头。
                      2. ((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))：匹配手机号码的前三位，包括130-139、145、147、150-153、155-159、180、185-189等号段。
                      3. \d&#123;8&#125;：匹配手机号码后8位数字。
                      4. $：以任意字符结尾
                     *&#x2F;
                    boolean flag &#x3D; phone.matches(&quot;^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\\d&#123;8&#125;$&quot;);
                    if (flag) &#123;
                        phoneMes.setText(&quot;√&quot;);
                        phoneMes.setForeground(Color.GREEN);
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;请输入正确的手机号格式&quot;);
                        phoneMes.setText(&quot;&quot;);
                    &#125;
                &#125;
            &#125;

            @Override
            public void focusGained(FocusEvent e) &#123;
            &#125;

        &#125;);

        &#x2F;&#x2F; 初始化展示“性别”的JLabel
        label_3 &#x3D; new JLabel(&quot;性别：&quot;);
        label_3.setForeground(Color.BLACK);
        label_3.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 24));
        label_3.setBounds(132, 362, 120, 48);
        jf.getContentPane().add(label_3);

		&#x2F;&#x2F; “男”按钮
        rdbtnNewRadioButton &#x3D; new JRadioButton(&quot;男&quot;);
        rdbtnNewRadioButton.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 16));
        rdbtnNewRadioButton.setBounds(202, 377, 58, 23);
        jf.getContentPane().add(rdbtnNewRadioButton);

		&#x2F;&#x2F; “女”按钮
        rdbtnNewRadioButton_1 &#x3D; new JRadioButton(&quot;女&quot;);
        rdbtnNewRadioButton_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 16));
        rdbtnNewRadioButton_1.setBounds(292, 377, 65, 23);
        jf.getContentPane().add(rdbtnNewRadioButton_1);
        ButtonGroup bg &#x3D; new ButtonGroup();
        bg.add(rdbtnNewRadioButton_1);
        bg.add(rdbtnNewRadioButton);

        &#x2F;&#x2F; 初始化”用户名“校验结果提示的JLabel
        usernameMes &#x3D; new JLabel(&quot;&quot;);
        usernameMes.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 15));
        usernameMes.setBounds(372, 202, 122, 27);
        jf.getContentPane().add(usernameMes);

        &#x2F;&#x2F; 初始化”密码“校验结果提示的JLabel
        passwordMes &#x3D; new JLabel(&quot;&quot;);
        passwordMes.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 15));
        passwordMes.setBounds(372, 262, 122, 27);
        jf.getContentPane().add(passwordMes);

        &#x2F;&#x2F; 初始化”手机号“校验结果提示的JLabel
        phoneMes &#x3D; new JLabel(&quot;&quot;);
        phoneMes.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 15));
        phoneMes.setBounds(372, 324, 122, 30);
        jf.getContentPane().add(phoneMes);

        &#x2F;&#x2F; 展示验证码的图片框
        vcode &#x3D; new ValidCode();
        vcode.setLocation(362, 422);
        jf.getContentPane().add(vcode);

        &#x2F;&#x2F; 初始化展示“验证码”的JLabel
        label_4 &#x3D; new JLabel(&quot;验证码：&quot;);
        label_4.setForeground(Color.BLACK);
        label_4.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 24));
        label_4.setBounds(110, 420, 100, 40);
        jf.getContentPane().add(label_4);

        &#x2F;&#x2F; 初始化输入验证码的文本框组件
        textField_3 &#x3D; new JTextField();
        textField_3.setColumns(18);
        textField_3.setBounds(230, 426, 83, 30);
        jf.getContentPane().add(textField_3);

        &#x2F;&#x2F; 初始化注册按钮
        button &#x3D; new JButton(&quot;注册&quot;);
        &#x2F;&#x2F; 给注册按钮添加一个动作监听器（校验验证码是否正确）
        button.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;

                &#x2F;&#x2F; 获取验证码内容
                String code &#x3D; textField_3.getText();
                if (ToolUtil.isEmpty(code)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请输入验证码&quot;);
                &#125; else &#123;
                    if (code.equalsIgnoreCase(vcode.getCode())) &#123;
                        RegCheck(e);&#x2F;&#x2F; 验证码校验成功
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;验证码错误，请重新输入&quot;);
                    &#125;
                &#125;
            &#125;
        &#125;);
        button.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        button.setBounds(120, 620, 120, 48);
        jf.getContentPane().add(button);

        &#x2F;&#x2F; 	初始化前往登录界面的按钮
        button_1 &#x3D; new JButton(&quot;前往登录页面&quot;);

        &#x2F;&#x2F; 给登录界面的按钮添加一个动作监听器按钮
        button_1.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                jf.setVisible(false);
                new LoginFrm();
            &#125;
        &#125;);
        button_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        button_1.setBounds(380, 620, 132, 48);
        jf.getContentPane().add(button_1);


        &#x2F;&#x2F; 初始化”用户注册的“的JLabel
        lblNewLabel_1 &#x3D; new JLabel(&quot;用户注册&quot;);
        lblNewLabel_1.setFont(new Font(&quot;黑体&quot;, Font.BOLD, 33));
        lblNewLabel_1.setForeground(Color.RED); &#x2F;&#x2F; 设置前景色为红色
        lblNewLabel_1.setBounds(214, 20, 200, 200);
        jf.getContentPane().add(lblNewLabel_1);

        &#x2F;&#x2F; 初始化界面注册页面背景图片所需的JLabel
        lblNewLabel &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel.setForeground(Color.BLACK);
        ImageIcon imageIcon &#x3D; new ImageIcon(&quot;lib&#x2F;images&#x2F;1.jpg&quot;);
        Image image &#x3D; imageIcon.getImage();
        image &#x3D; image.getScaledInstance(640, 960, Image.SCALE_DEFAULT);
        imageIcon.setImage(image);
        lblNewLabel.setIcon(imageIcon);

        lblNewLabel.setBounds(0, 0, 640, 960);
        jf.getContentPane().add(lblNewLabel);

        &#x2F;&#x2F; 显示页面
        jf.setVisible(true);
        &#x2F;&#x2F; 是否可以更改jf的大小
        jf.setResizable(false);
    &#125;

    &#x2F;&#x2F; 完成用户注册
    public void RegCheck(ActionEvent e) &#123;
        &#x2F;&#x2F; 获取相关组件数据
        String username &#x3D; textField.getText();
        String password &#x3D; textField_1.getText();
        String phone &#x3D; textField_2.getText();
        String sex &#x3D; &quot;&quot;;
        if (rdbtnNewRadioButton.isSelected()) &#123;
            sex &#x3D; rdbtnNewRadioButton.getText();
        &#125; else &#123;
            sex &#x3D; rdbtnNewRadioButton_1.getText();
        &#125;
        &#x2F;&#x2F; 判断数据是否为空
        if (ToolUtil.isEmpty(username) || ToolUtil.isEmpty(password) || ToolUtil.isEmpty(phone)) &#123;
            JOptionPane.showMessageDialog(null, &quot;请输入相关信息&quot;);
            return;
        &#125;

        &#x2F;&#x2F; 把数据封装到User对象中
        User user &#x3D; new User();
        user.setUserName(username);
        user.setPassword(password);
        user.setSex(sex);
        user.setPhone(phone);
        user.setRole(1);

        &#x2F;&#x2F; 获取一个连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            int i &#x3D; userDao.addUser(con, user);&#x2F;&#x2F; 使用获取的连接和传递进来的&quot;user&quot;对象进行注册。将注册结果存储在名为&quot;i&quot;的整型变量中
            if (i &#x3D;&#x3D; 2) &#123;
                JOptionPane.showMessageDialog(null, &quot;该用户名已存在,请重新注册&quot;);
            &#125; else if (i &#x3D;&#x3D; 0) &#123;
                JOptionPane.showMessageDialog(null, &quot;注册失败&quot;);
            &#125; else &#123;
                JOptionPane.showMessageDialog(null, &quot;注册成功&quot;);
                jf.dispose(); &#x2F;&#x2F; 关闭窗口释放资源
                new LoginFrm();&#x2F;&#x2F; 打开登录界面
            &#125;
        &#125; catch (Exception e1) &#123;
            e1.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e1) &#123;
                e1.printStackTrace();
            &#125;
        &#125;

    &#125;


    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new RegFrm(); &#x2F;&#x2F; 注册界面
    &#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="7-2-验证码"><a href="#7-2-验证码" class="headerlink" title="7.2 验证码"></a>7.2 验证码</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.geom.AffineTransform;
import java.util.Random;
 
import javax.swing.JComponent;

&#x2F;&#x2F; 展示验证码的组件
public class ValidCode extends JComponent implements MouseListener &#123;
 
	private String code;				&#x2F;&#x2F; 验证码的文本信息
	private int width, height &#x3D; 40;		&#x2F;&#x2F; 验证码图片大小
	private int codeLength &#x3D; 4; 		&#x2F;&#x2F; 验证码文本信息长度
 
	private Random random &#x3D; new Random();

	public ValidCode() &#123;
		width &#x3D; this.codeLength * 16 + (this.codeLength - 1) * 10;
		setPreferredSize(new Dimension(width, height));
		setSize(width, height);
		this.addMouseListener(this);
		setToolTipText(&quot;点击可以更换验证码&quot;);
	&#125;
 
	public int getCodeLength() &#123;
		return codeLength;
	&#125;
 
	&#x2F;&#x2F; 设置验证码文字的长度
	public void setCodeLength(int codeLength) &#123;
		if(codeLength &lt; 4) &#123;
			this.codeLength &#x3D; 4;
		&#125; else &#123;
			this.codeLength &#x3D; codeLength;
		&#125;
	&#125;
 
	public String getCode() &#123;
		return code;
	&#125;
 
	&#x2F;&#x2F; 产生随机的颜色
	public Color getRandColor(int min, int max) &#123;
		if (min &gt; 255)
			min &#x3D; 255;
		if (max &gt; 255)
			max &#x3D; 255;
		int red &#x3D; random.nextInt(max - min) + min;
		int green &#x3D; random.nextInt(max - min) + min;
		int blue &#x3D; random.nextInt(max - min) + min;
		return new Color(red, green, blue);
	&#125;

	&#x2F;&#x2F; 设置验证码具体的字母是什么
	public String generateCode() &#123;
		char[] codes &#x3D; new char[this.codeLength];
		for (int i &#x3D; 0, len &#x3D; codes.length; i &lt; len; i++) &#123;
			if (random.nextBoolean()) &#123;
				codes[i] &#x3D; (char) (random.nextInt(26) + 65);
			&#125; else &#123;
				codes[i] &#x3D; (char) (random.nextInt(26) + 97);
			&#125;
		&#125;
		this.code &#x3D; new String(codes);
		return this.code;
	&#125;
 
	@Override
	protected void paintComponent(Graphics g) &#123; &#x2F;&#x2F; 	Graphics是画笔对象，用来画出验证码
		super.paintComponent(g);
		if(this.code &#x3D;&#x3D; null || this.code.length() !&#x3D; this.codeLength) &#123;
			this.code &#x3D; generateCode();
		&#125;

		width &#x3D; this.codeLength * 16 + (this.codeLength - 1) * 10;
		super.setSize(width, height);
		super.setPreferredSize(new Dimension(width, height));
		Font mFont &#x3D; new Font(&quot;Arial&quot;, Font.BOLD | Font.ITALIC, 25);
		g.setFont(mFont);

		&#x2F;&#x2F;绘制出验证码的背景的矩形轮廓
		Graphics2D g2d &#x3D; (Graphics2D) g;
		g2d.setColor(getRandColor(200, 250));
		g2d.fillRect(0, 0, width, height);
		g2d.setColor(getRandColor(180, 200));
		g2d.drawRect(0, 0, width - 1, height - 1); &#x2F;&#x2F; 画一个矩阵

		&#x2F;&#x2F;绘制出验证码背景的线
		int i &#x3D; 0, len &#x3D; 150;
		for (; i &lt; len; i++) &#123;
			int x &#x3D; random.nextInt(width - 1);
			int y &#x3D; random.nextInt(height - 1);
			int x1 &#x3D; random.nextInt(width - 10) + 10;
			int y1 &#x3D; random.nextInt(height - 4) + 4;
			g2d.setColor(getRandColor(180, 200));
			g2d.drawLine(x, y, x1, y1);  &#x2F;&#x2F; 画线
		&#125;

		&#x2F;&#x2F;绘制出验证码的具体字母
		i &#x3D; 0; len &#x3D; this.codeLength;
		FontMetrics fm &#x3D; g2d.getFontMetrics();
		int base &#x3D; (height - fm.getHeight())&#x2F;2 + fm.getAscent();
		for(;i&lt;len;i++) &#123;
			int b &#x3D; random.nextBoolean() ? 1 : -1;
			g2d.rotate(random.nextInt(10)*0.01*b);
			g2d.setColor(getRandColor(20, 130));
			g2d.drawString(code.charAt(i)+&quot;&quot;, 16 * i + 10, base);&#x2F;&#x2F; 从二维字符中获取对应的字符将其划到界面中
		&#125;
	&#125;
 
	&#x2F;&#x2F;下一个验证码
	public void nextCode() &#123;
		generateCode();	&#x2F;&#x2F; 重新生成一个4位数的验证码
		repaint();		&#x2F;&#x2F; 重新渲染组件
	&#125;
 
	@Override
	public void mouseClicked(MouseEvent e) &#123;
		nextCode();
	&#125;
 
	@Override
	public void mousePressed(MouseEvent e) &#123;
		
	&#125;
 
	@Override
	public void mouseReleased(MouseEvent e) &#123;
		
	&#125;
 
	@Override
	public void mouseEntered(MouseEvent e) &#123;
		
	&#125;
 
	@Override
	public void mouseExited(MouseEvent e) &#123;
		
	&#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="7-3-用户登录"><a href="#7-3-用户登录" class="headerlink" title="7.3 用户登录"></a>7.3 用户登录</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.awt.*;
import java.sql.*;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPasswordField;

import com.hechaodong.bookmanager.dao.UserDao;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;
import com.hechaodong.bookmanager.model.User;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;

import javax.swing.JTextField;
import javax.swing.JComboBox;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

&#x2F;&#x2F; 用户登录界面
public class LoginFrm extends JFrame &#123;

    public static User currentUser;             &#x2F;&#x2F; 当登录成功后，使用该变量存储登录的用户
    private JFrame jf;                          &#x2F;&#x2F; 登录界面的窗体结构
    private JTextField userNameText;            &#x2F;&#x2F; 输入用户名的文本框
    private JTextField passwordText;            &#x2F;&#x2F; 输入密码的文本框
    private JComboBox&lt;String&gt; comboBox;         &#x2F;&#x2F; 用户选项的下拉选择框

    private UserDao userDao &#x3D; new UserDao();
    private DbUtil dbUtil &#x3D; new DbUtil();

    public LoginFrm() &#123;
        &#x2F;&#x2F; 初始化窗体组件
        jf &#x3D; new JFrame(&quot;图书管理&quot;);
        jf.getContentPane().setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        jf.setBounds(650, 250, 640, 960);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.getContentPane().setLayout(null);

        &#x2F;&#x2F; 初始化登录界面的图片
        JLabel lblNewLabel &#x3D; new JLabel();
        ImageIcon imageIcon &#x3D; new ImageIcon(&quot;lib&#x2F;images&#x2F;2.jpg&quot;);
        Image image &#x3D; imageIcon.getImage();
        image &#x3D; image.getScaledInstance(280, 168, Image.SCALE_DEFAULT);
        imageIcon.setImage(image);
        lblNewLabel.setIcon(imageIcon);

        lblNewLabel.setBounds(180, 72, 430, 218);
        jf.getContentPane().add(lblNewLabel);

        &#x2F;&#x2F; 初始化展示“用户名”的JLabel
        JLabel label &#x3D; new JLabel(&quot;用户名：&quot;);
        label.setFont(new Font(&quot;黑体&quot;, Font.BOLD, 24));
        label.setBounds(150, 292, 100, 100);
        jf.getContentPane().add(label);

        &#x2F;&#x2F; 初始化用户名的文本框组件
        userNameText &#x3D; new JTextField();
        userNameText.setBounds(250, 322, 142, 40);
        jf.getContentPane().add(userNameText);
        userNameText.setColumns(10);

        &#x2F;&#x2F; 初始化展示“密码”的JLabel
        JLabel label_1 &#x3D; new JLabel(&quot;密码：&quot;);
        label_1.setFont(new Font(&quot;黑体&quot;, Font.BOLD, 24));
        label_1.setBounds(170, 362, 100, 100);
        jf.getContentPane().add(label_1);

        &#x2F;&#x2F; 初始化密码的文本框组件
        passwordText &#x3D; new JPasswordField();
        passwordText.setColumns(10);
        passwordText.setBounds(250, 392, 142, 40);
        jf.getContentPane().add(passwordText);

        &#x2F;&#x2F; 初始化展示“权限”的JLabel
        JLabel label_2 &#x3D; new JLabel(&quot;权限：&quot;);
        label_2.setFont(new Font(&quot;黑体&quot;, Font.BOLD, 24));
        label_2.setBounds(172, 442, 80, 80);
        jf.getContentPane().add(label_2);

        &#x2F;&#x2F; 初始权限的文本框组件
        comboBox &#x3D; new JComboBox();
        comboBox.setBounds(250, 462, 142, 40);
        comboBox.addItem(&quot;用户&quot;);
        comboBox.addItem(&quot;管理员&quot;);
        jf.getContentPane().add(comboBox); &#x2F;&#x2F; 用户-----管理员

        &#x2F;&#x2F; 登录按钮
        JButton button &#x3D; new JButton(&quot;登录&quot;);
        button.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                checkLogin(e); &#x2F;&#x2F; 检查登录（获取数据比对数据库信息）
            &#125;
        &#125;);
        button.setBounds(150, 650, 120, 48);
        jf.getContentPane().add(button);

        &#x2F;&#x2F; 注册按钮
        JButton button_1 &#x3D; new JButton(&quot;注册&quot;);
        button_1.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                regUser(e); &#x2F;&#x2F; 跳转到注册界面
            &#125;
        &#125;);
        button_1.setBounds(350, 650, 120, 48);
        jf.getContentPane().add(button_1);

        &#x2F;&#x2F; 登录界面背景图
        JLabel lblNewLabel_1 &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel_1.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;3.jpg&quot;));
        lblNewLabel_1.setBounds(0, 0, 640, 940);
        jf.getContentPane().add(lblNewLabel_1);


        &#x2F;&#x2F; 显示界面，不可以调整界面大小
        jf.setVisible(true);
        jf.setResizable(false);

    &#125;

    &#x2F;&#x2F; 跳转到注册页面
    public void regUser(ActionEvent e) &#123;
        jf.setVisible(false);
        new RegFrm();

    &#125;

    &#x2F;&#x2F; 用户登录的逻辑操作（获取数据并校对数据库数据是否一致）
    public void checkLogin(ActionEvent e) &#123;
        &#x2F;&#x2F; 获取用户登录信息
        String userName &#x3D; userNameText.getText();
        String password &#x3D; passwordText.getText();
        int index &#x3D; comboBox.getSelectedIndex(); &#x2F;&#x2F; 权限
        if (ToolUtil.isEmpty(userName) || ToolUtil.isEmpty(password)) &#123;
            JOptionPane.showMessageDialog(null, &quot;用户名和密码不能为空&quot;);
            return;
        &#125;

        &#x2F;&#x2F; 把数据封装到User对象中
        User user &#x3D; new User();
        user.setUserName(userName);
        user.setPassword(password);
        if (index &#x3D;&#x3D; 0) &#123;
            user.setRole(1);&#x2F;&#x2F; 用户
        &#125; else &#123;
            user.setRole(2);&#x2F;&#x2F; 管理员
        &#125;

        &#x2F;&#x2F; 获取一个连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection(); &#x2F;&#x2F; 获取数据库连接
            User login &#x3D; userDao.login(con, user);&#x2F;&#x2F; 使用获取的连接和传递进来的&quot;user&quot;对象进行登录验证
            currentUser &#x3D; login;
            if (login &#x3D;&#x3D; null) &#123;
                JOptionPane.showMessageDialog(null, &quot;登录失败&quot;);
            &#125; else &#123;
                &#x2F;&#x2F; 权限 1普通 2管理员
                if (index &#x3D;&#x3D; 0) &#123;
                    jf.dispose(); &#x2F;&#x2F; 释放与当前窗口关联的所有资源
                    new UserMenuFrm(); &#x2F;&#x2F; 用户界面
                &#125; else &#123;
                    jf.dispose();&#x2F;&#x2F; 释放与当前窗口关联的所有资源
                    new AdminMenuFrm(); &#x2F;&#x2F; 管理员界面
                &#125;
            &#125;
        &#125; catch (Exception e21) &#123;
            e21.printStackTrace();
            JOptionPane.showMessageDialog(null, &quot;登录异常&quot;);
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e31) &#123;
                e31.printStackTrace();
            &#125;
        &#125;
    &#125;

    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new LoginFrm();
    &#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>









<h2 id="8-图书借还模块"><a href="#8-图书借还模块" class="headerlink" title="8. 图书借还模块"></a>8. 图书借还模块</h2><h3 id="8-1-用户操作界面"><a href="#8-1-用户操作界面" class="headerlink" title="8.1 用户操作界面"></a>8.1 用户操作界面</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.sql.*;
import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.sql.ResultSet;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.border.TitledBorder;
import javax.swing.table.DefaultTableModel;

import com.hechaodong.bookmanager.dao.BorrowDetailDao;
import com.hechaodong.bookmanager.dao.BookDao;
import com.hechaodong.bookmanager.model.BorrowDetail;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import com.hechaodong.bookmanager.model.Book;

import javax.swing.ImageIcon;


public class UserMenuFrm extends JFrame &#123;
    private JFrame jf;                  &#x2F;&#x2F; 主界面的JFrame窗口
    private JLabel lblNewLabel_1;       &#x2F;&#x2F; 展示当前登录用户的用户名所需要的JLabel
    private JLabel lblNewLabel_2;       &#x2F;&#x2F; 展示顶部“欢迎你”的JLabel
    private JTable table;               &#x2F;&#x2F; 借阅信息的表格组件
    private DefaultTableModel model;    &#x2F;&#x2F; 借阅信息的表格组件所需要的数据模型对象
    private JTextField textField;       &#x2F;&#x2F; 输入换书编号的文本框textField
    private JButton btnBackBook;        &#x2F;&#x2F; 换书按钮
    private JButton button;             &#x2F;&#x2F; 退出系统按钮
    private JPanel panel_2;             &#x2F;&#x2F; 初始化展示图书信息所需要的面板
    private JComboBox comboBox;         &#x2F;&#x2F; 搜索字段所需要的下拉选择框
    private JTextField textField_1;     &#x2F;&#x2F; 搜索关键字所需要的文本框
    private JButton button_1;           &#x2F;&#x2F; 查询按钮
    private JTable BookTable;           &#x2F;&#x2F; 展示图书信息所需要的表格组件
    private DefaultTableModel BookModel;&#x2F;&#x2F; 展示图书信息所需要的表格组件的数据模型组件
    private JTextField textField_2;     &#x2F;&#x2F; 展示借书编号所需要的文本框组件
    private JTextField textField_3;     &#x2F;&#x2F; 展示借书书名所需要的文本框组件
    private JLabel lblNewLabel_3;       &#x2F;&#x2F; 展示背景图片所需要的JLabel

    private DbUtil dbUtil &#x3D; new DbUtil();
    private BorrowDetailDao borrowDetailDao &#x3D; new BorrowDetailDao();
    private BookDao BookDao &#x3D; new BookDao();

    public UserMenuFrm() &#123;

        &#x2F;&#x2F; 初始化用户操作界面
        jf &#x3D; new JFrame();
        jf.setTitle(&quot;用户页面&quot;);
        jf.setBounds(650, 250, 691, 896);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.getContentPane().setLayout(null);

        &#x2F;&#x2F; 顶部展示”借阅信息“的JPanel
        JPanel panel_1 &#x3D; new JPanel();
        panel_1.setBorder(new TitledBorder(UIManager.getBorder(&quot;TitledBorder.border&quot;), &quot;借阅信息&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, new Color(255, 0, 0)));
        panel_1.setBounds(23, 48, 651, 239);

        &#x2F;&#x2F; 表头栏数据
        String[] title &#x3D; &#123;&quot;编号&quot;, &quot;书名&quot;, &quot;状态&quot;, &quot;借书时间&quot;, &quot;还书时间&quot;&#125;;&#x2F;&#x2F; 一维数组
        &#x2F;&#x2F; 具体的各栏行记录 先用空的二位数组占位
        String[][] dates &#x3D; &#123;&#125;;


        &#x2F;&#x2F; 初始化表格组件以及数据模型组件 （然后实例化 上面2个控件对象）
        model &#x3D; new DefaultTableModel(dates, title);
        table &#x3D; new JTable();
        table.setModel(model);

        &#x2F;&#x2F; 获取数据库数据放置table中
        putDates(new BorrowDetail());

        &#x2F;&#x2F; 将表格组件添加到JScrollPane中，并将JScrollPane添加到panel_1中，最后将panel_1添加到JFrame中
        panel_1.setLayout(null);
        JScrollPane jscrollpane &#x3D; new JScrollPane();
        jscrollpane.setBounds(20, 22, 607, 188);
        jscrollpane.setViewportView(table);
        panel_1.add(jscrollpane);
        jf.getContentPane().add(panel_1);

        &#x2F;&#x2F; 顶部问候语
        lblNewLabel_1 &#x3D; new JLabel(&quot;New label&quot;);
        lblNewLabel_1.setForeground(Color.RED);
        lblNewLabel_1.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 18));
        lblNewLabel_1.setBounds(315, 0, 197, 28);
        jf.getContentPane().add(lblNewLabel_1);
        lblNewLabel_1.setText(LoginFrm.currentUser.getUserName());

        lblNewLabel_2 &#x3D; new JLabel(&quot;欢迎来到知识的海洋 &quot;);
        lblNewLabel_2.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 18));
        lblNewLabel_2.setBounds(254, 4, 258, 68);
        jf.getContentPane().add(lblNewLabel_2);

        &#x2F;&#x2F; 还书操作界面的JPanel
        JPanel panel &#x3D; new JPanel();
        panel.setBorder(new TitledBorder(UIManager.getBorder(&quot;TitledBorder.border&quot;), &quot;还书&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, new Color(255, 0, 0)));
        panel.setBounds(23, 294, 651, 70);
        jf.getContentPane().add(panel);
        panel.setLayout(null);


        &#x2F;&#x2F; 展示“编号”的JLabel
        JLabel lblNewLabel &#x3D; new JLabel(&quot;编号：&quot;);
        lblNewLabel.setBounds(90, 25, 51, 27);
        panel.add(lblNewLabel);
        lblNewLabel.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 16));

        &#x2F;&#x2F; 初始化编号所对应的文本框组件
        textField &#x3D; new JTextField();
        textField.setBounds(145, 28, 116, 24);
        panel.add(textField);
        textField.setColumns(10);

        &#x2F;&#x2F; 初始化还书按钮
        btnBackBook &#x3D; new JButton(&quot;还书&quot;);
        btnBackBook.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 15));
        btnBackBook.setBounds(299, 25, 85, 31);
        panel.add(btnBackBook);

        &#x2F;&#x2F; 初始化退出系统按钮
        button &#x3D; new JButton(&quot;退出系统&quot;);
        button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 15));
        button.setBounds(407, 25, 103, 31);
        panel.add(button);

        &#x2F;&#x2F; 初始化展示展示图书信息的面板
        panel_2 &#x3D; new JPanel();
        panel_2.setBorder(new TitledBorder(null, &quot;借阅信息&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, Color.RED));
        panel_2.setBounds(23, 374, 651, 346);
        jf.getContentPane().add(panel_2);
        panel_2.setLayout(null);

        &#x2F;&#x2F; 初始化查询关所对应的文本框组件
        textField_1 &#x3D; new JTextField();
        textField_1.setColumns(10);
        textField_1.setBounds(252, 23, 135, 27);
        panel_2.add(textField_1);

        &#x2F;&#x2F; 初始化查询按钮组件
        button_1 &#x3D; new JButton(&quot;查询&quot;);
        button_1.addActionListener(new ActionListener() &#123;       &#x2F;&#x2F; 业务查询的代码逻辑

            public void actionPerformed(ActionEvent e) &#123;

                &#x2F;&#x2F; 获取查询字段
                int index &#x3D; comboBox.getSelectedIndex();
                if (index &#x3D;&#x3D; 0) &#123; &#x2F;&#x2F; 书名查询
                    String bookName &#x3D; textField_1.getText();
                    Book book &#x3D; new Book();
                    book.setBookName(bookName);
                    putDates(book);
                &#125; else &#123;          &#x2F;&#x2F; 作者名查询
                    String authoerName &#x3D; textField_1.getText();
                    Book book &#x3D; new Book();
                    book.setAuthor(authoerName);
                    putDates(book);
                &#125;
            &#125;
        &#125;);
        &#x2F;&#x2F; 查询按钮
        button_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 16));
        button_1.setBounds(408, 20, 93, 33);
        panel_2.add(button_1);


        &#x2F;&#x2F; 初始化查询字段所对应的下拉选择框组件
        comboBox &#x3D; new JComboBox();
        comboBox.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        comboBox.setBounds(123, 26, 109, 24);
        comboBox.addItem(&quot;书籍名称&quot;);
        comboBox.addItem(&quot;书籍作者&quot;);
        panel_2.add(comboBox);

        &#x2F;&#x2F; 展示图书信息所对应的表头数据
        String[] BookTitle &#x3D; &#123;&quot;编号&quot;, &quot;书名&quot;, &quot;类型&quot;, &quot;作者&quot;, &quot;描述&quot;&#125;;

        &#x2F;&#x2F; 具体的各栏行记录 先用空的二位数组占位
        String[][] BookDates &#x3D; &#123;&#125;;

        &#x2F;&#x2F; 建立数据模型，实例化上面2个控件对象
        BookModel &#x3D; new DefaultTableModel(BookDates, BookTitle);
        BookTable &#x3D; new JTable(BookModel);

        &#x2F;&#x2F; 获取数据库数据放置table中
        putDates(new Book());

        &#x2F;&#x2F; 将bookTable添加到JScrollPane中，再将JScrollPane添加到panel_2中，最后将panel_2添加到JFrame中
        panel_2.setLayout(null);
        JScrollPane jscrollpane1 &#x3D; new JScrollPane();
        jscrollpane1.setBounds(22, 74, 607, 250);
        jscrollpane1.setViewportView(BookTable);
        panel_2.add(jscrollpane1);
        jf.getContentPane().add(panel_2);

        &#x2F;&#x2F; 创建展示借书的面板
        JPanel panel_3 &#x3D; new JPanel();
        panel_3.setBorder(new TitledBorder(null, &quot;借书&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, Color.RED));
        panel_3.setBounds(23, 730, 645, 87);
        jf.getContentPane().add(panel_3);
        panel_3.setLayout(null);

        &#x2F;&#x2F; 初始化展示编号两个字所需要的JLabel
        JLabel label &#x3D; new JLabel(&quot;编号：&quot;);
        label.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 15));
        label.setBounds(68, 31, 48, 33);
        panel_3.add(label);

        &#x2F;&#x2F; 初始化展示所借图书编号所需要的文本框组件
        textField_2 &#x3D; new JTextField();
        textField_2.setEditable(false);
        textField_2.setColumns(10);
        textField_2.setBounds(126, 34, 135, 27);
        panel_3.add(textField_2);

        &#x2F;&#x2F; 初始化展示书名两个字所需要的JLabel
        JLabel label_1 &#x3D; new JLabel(&quot;书名：&quot;);
        label_1.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 15));
        label_1.setBounds(281, 31, 48, 33);
        panel_3.add(label_1);

        &#x2F;&#x2F; 初始化展示所借书名所需要的文本框组件
        textField_3 &#x3D; new JTextField();
        textField_3.setEditable(false);
        textField_3.setColumns(10);
        textField_3.setBounds(339, 34, 135, 27);
        panel_3.add(textField_3);


        &#x2F;&#x2F; 创建借书按钮
        JButton button_2 &#x3D; new JButton(&quot;借书&quot;);
        button_2.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;

                &#x2F;&#x2F; 获取要借的书所对应的编号及其书名
                String bookId &#x3D; textField_2.getText();
                String bookName &#x3D; textField_3.getText();
                if (ToolUtil.isEmpty(bookId) || ToolUtil.isEmpty(bookName)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请选择相关书籍&quot;);
                    return;
                &#125;
                &#x2F;&#x2F; 把要借的书的相关信息封装成一个BorrowDetail
                BorrowDetail borrowDetail &#x3D; new BorrowDetail();
                borrowDetail.setUserId(LoginFrm.currentUser.getUserId());
                borrowDetail.setBookId(Integer.parseInt(bookId));
                borrowDetail.setStatus(1);
                borrowDetail.setBorrowTime(ToolUtil.getTime());

                &#x2F;&#x2F; 获取连接对象
                Connection con &#x3D; null;
                try &#123;
                    con &#x3D; dbUtil.getConnection();
                    ResultSet list &#x3D; borrowDetailDao.list(con, borrowDetail);&#x2F;&#x2F;先查询是否有该书
                    while (list.next()) &#123;
                        JOptionPane.showMessageDialog(null, &quot;该书已在借,请先还再借&quot;);
                        return;
                    &#125;
                    &#x2F;&#x2F; 保存借阅信息
                    int i &#x3D; borrowDetailDao.add(con, borrowDetail);
                    &#x2F;&#x2F; 对返回结果进行判断
                    if (i &#x3D;&#x3D; 1) &#123;
                        JOptionPane.showMessageDialog(null, &quot;借书成功&quot;);
                        putDates(new BorrowDetail());
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;借书失败&quot;);
                    &#125;
                &#125; catch (Exception e1) &#123;
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(null, &quot;借书异常&quot;);
                &#125; finally &#123;
                    try &#123;
                        dbUtil.closeCon(con);
                    &#125; catch (Exception e1) &#123;
                        e1.printStackTrace();
                    &#125;
                &#125;
            &#125;
        &#125;);
        button_2.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 16));
        button_2.setBounds(495, 31, 80, 33);
        panel_3.add(button_2);

        &#x2F;&#x2F; 初始化展示背景图片所需要的JLabel
        lblNewLabel_3 &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel_3.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;7.png&quot;));
        lblNewLabel_3.setBounds(0, 0, 684, 864);
        jf.getContentPane().add(lblNewLabel_3);

        &#x2F;&#x2F; 给借书的表格添加一个鼠标监听器
        BookTable.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                tableMousePressed(evt);
            &#125;
        &#125;);

        &#x2F;&#x2F; 给退出系统添加一个动作监听按钮
        button.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                JOptionPane.showMessageDialog(null, &quot;欢迎再次使用&quot;);
                jf.dispose();
            &#125;
        &#125;);
        btnBackBook.setVisible(false);&#x2F;&#x2F; 关闭窗口

        &#x2F;&#x2F; 给还书按钮添加一个动作监听按钮
        btnBackBook.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;

                &#x2F;&#x2F; 获取还书信息的编号
                String BorrowStr &#x3D; textField.getText();
                if (ToolUtil.isEmpty(BorrowStr)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请选择未还的书籍&quot;);
                    return;
                &#125;

                &#x2F;&#x2F; 创建BorrowDetail对象，封装还书所对应的数据
                BorrowDetail detail &#x3D; new BorrowDetail();
                detail.setBorrowId(Integer.parseInt(BorrowStr));
                detail.setStatus(2);
                detail.setReturnTime(ToolUtil.getTime());

                &#x2F;&#x2F; 获取连接对象
                Connection con &#x3D; null;
                try &#123;
                    con &#x3D; dbUtil.getConnection();
                    int i &#x3D; borrowDetailDao.returnBook(con, detail);
                    if (i &#x3D;&#x3D; 1) &#123;
                        JOptionPane.showMessageDialog(null, &quot;还书成功&quot;);
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;还书失败&quot;);
                    &#125;
                &#125; catch (Exception e1) &#123;
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(null, &quot;还书异常&quot;);
                &#125; finally &#123;
                    try &#123;
                        dbUtil.closeCon(con);
                    &#125; catch (Exception e1) &#123;
                        e1.printStackTrace();
                    &#125;
                &#125;

                &#x2F;&#x2F; 重新查询借阅信息
                putDates(new BorrowDetail());
            &#125;
        &#125;);

        &#x2F;&#x2F; 让jf可以显示，并且可以更改jf的大小
        jf.setVisible(true);
        jf.setResizable(true);
    &#125;

    public void tableMousePressed(MouseEvent evt) &#123;

        &#x2F;&#x2F; 获取当前用户所选择的数据行，然后将该行的数据在借书面板的相关组件中进行展示
        int row &#x3D; BookTable.getSelectedRow();
        Object bookId &#x3D; BookTable.getValueAt(row, 0);
        Object bookName &#x3D; BookTable.getValueAt(row, 1);
        textField_2.setText(bookId.toString());
        textField_3.setText(bookName.toString());
    &#125;

    &#x2F;&#x2F;从数据库获取书籍信息
    public void putDates(Book book) &#123;
        DefaultTableModel model &#x3D; (DefaultTableModel) BookTable.getModel();
        model.setRowCount(0);&#x2F;&#x2F; 将表格的行数设置为0，即清空表格中的所有行数据

        &#x2F;&#x2F; 获取连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            book.setStatus(1);&#x2F;&#x2F; 给book对象设置sataus属性为1 上架
            ResultSet list &#x3D; BookDao.list(con, book);&#x2F;&#x2F; 调用BookDao中的方法进行查询
            while (list.next()) &#123;
                Vector rowData &#x3D; new Vector();
                rowData.add(list.getInt(&quot;id&quot;));
                rowData.add(list.getString(&quot;book_name&quot;));
                rowData.add(list.getString(&quot;type_name&quot;));
                rowData.add(list.getString(&quot;author&quot;));
                rowData.add(list.getString(&quot;remark&quot;));
                model.addRow(rowData);
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;

    public void putDates(BorrowDetail borrowDetail) &#123;
        DefaultTableModel model &#x3D; (DefaultTableModel) table.getModel();
        model.setRowCount(0);
        Integer userId &#x3D; LoginFrm.currentUser.getUserId();
        Connection con &#x3D; null;

        &#x2F;&#x2F; 获取连接对象
        try &#123;
            con &#x3D; dbUtil.getConnection();
            borrowDetail.setUserId(userId);
            ResultSet list &#x3D; borrowDetailDao.list(con, borrowDetail);
            while (list.next()) &#123;
                Vector rowData &#x3D; new Vector();
                rowData.add(list.getInt(&quot;id&quot;));
                rowData.add(list.getString(&quot;book_name&quot;));
                int status &#x3D; list.getInt(&quot;status&quot;);
                if (status &#x3D;&#x3D; 1) &#123;
                    rowData.add(&quot;在借&quot;);
                &#125;
                if (status &#x3D;&#x3D; 2) &#123;
                    rowData.add(&quot;已还&quot;);
                &#125;
                rowData.add(ToolUtil.getDateByTime(list.getLong(&quot;borrow_time&quot;)));
                if (status &#x3D;&#x3D; 2) &#123;
                    rowData.add(ToolUtil.getDateByTime(list.getLong(&quot;return_time&quot;)));
                &#125;
                model.addRow(rowData);
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

        &#x2F;&#x2F; 添加一个鼠标监听器
        table.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent me) &#123;
                putBack(me);
            &#125;
        &#125;);
    &#125;

    protected void putBack(MouseEvent me) &#123;

        &#x2F;&#x2F; 获取用户所选的行信息
        int row &#x3D; table.getSelectedRow();
        Integer borrowId &#x3D; (Integer) table.getValueAt(row, 0);
        String status &#x3D; (String) table.getValueAt(row, 2);
        textField.setText(borrowId.toString());
        if (status.equals(&quot;在借&quot;)) &#123;
            this.btnBackBook.setVisible(true);
        &#125; else &#123;
            this.btnBackBook.setVisible(false);
        &#125;

    &#125;

    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new UserMenuFrm();
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="9-书籍管理模块"><a href="#9-书籍管理模块" class="headerlink" title="9. 书籍管理模块"></a>9. 书籍管理模块</h2><h3 id="9-1-管理员操作界面"><a href="#9-1-管理员操作界面" class="headerlink" title="9.1 管理员操作界面"></a>9.1 管理员操作界面</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.sql.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;

import com.hechaodong.bookmanager.dao.BookTypeDao;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import com.hechaodong.bookmanager.model.BookType;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;

import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JLabel;
import javax.swing.JTextField;

import java.awt.Font;

import javax.swing.JButton;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

import javax.swing.JTextArea;

import java.awt.Color;
import javax.swing.ImageIcon;

public class AdminMenuFrm extends JFrame &#123;

	private JFrame jf;					&#x2F;&#x2F; 主操作界面所对应的窗体
	private JTextField textField;		&#x2F;&#x2F; 输入类别名称所需要的文本框组件
	private JButton btnNewButton;		&#x2F;&#x2F;添加按钮
	private JTextArea textArea;			&#x2F;&#x2F;输入类别详情信息所需要的文本框组件

	private DbUtil dbUtil&#x3D;new DbUtil();
	private BookTypeDao bookTypeDao&#x3D;new BookTypeDao();


	public AdminMenuFrm()&#123;

		&#x2F;&#x2F; 初始化主界面所对应的窗体组件
		jf&#x3D;new JFrame(&quot;管理员界面&quot;);
		jf.setBounds(650, 250, 600, 429);
		jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		jf.getContentPane().setLayout(null);

		&#x2F;&#x2F; 初始化展示“类别名称”的 JLabel
		JLabel label &#x3D; new JLabel();
		label.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
		label.setText(&quot;类别说明：&quot;);
		label.setBounds(112, 107, 75, 26);
		jf.getContentPane().add(label);

		&#x2F;&#x2F; 初始化展示“类别说明”的JLabel
		JLabel label_1 &#x3D; new JLabel();
		label_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
		label_1.setText(&quot;类别名称：&quot;);
		label_1.setBounds(112, 38, 75, 26);
		jf.getContentPane().add(label_1);

		&#x2F;&#x2F; 初始化输入类别名称所需要的文本框组件
		textField &#x3D; new JTextField();
		textField.setBounds(197, 38, 241, 26);
		jf.getContentPane().add(textField);

		&#x2F;&#x2F; 初始化添加按钮
		btnNewButton &#x3D; new JButton(&quot;添加&quot;);
		btnNewButton.addActionListener(new ActionListener() &#123;
			public void actionPerformed(ActionEvent e) &#123;

				&#x2F;&#x2F; 获取类别名称和类别说明数据
				String typeName &#x3D; textField.getText();
				String typeRemark &#x3D; textArea.getText();
				&#x2F;&#x2F; 判断数据
				if (ToolUtil.isEmpty(typeName) || ToolUtil.isEmpty(typeRemark)) &#123;
					JOptionPane.showMessageDialog(null, &quot;请输入相关信息&quot;);
					return;
				&#125;

				&#x2F;&#x2F; 把数据封装到BookType对象
				BookType bookType &#x3D; new BookType();
				bookType.setTypeName(typeName);
				bookType.setRemark(typeRemark);

				&#x2F;&#x2F; 获取连接对象
				Connection con &#x3D; null;
				try &#123;
					&#x2F;&#x2F; 把数据保存到数据库中
					con &#x3D; dbUtil.getConnection();
					int i &#x3D; bookTypeDao.add(con, bookType);
					if (i &#x3D;&#x3D; 1) &#123;
						JOptionPane.showMessageDialog(null, &quot;添加成功&quot;);
						reset();
					&#125;else if(i &#x3D;&#x3D; 2)&#123;
						JOptionPane.showMessageDialog(null, &quot;添加失败,类别已存在&quot;);
					&#125; else &#123;
						JOptionPane.showMessageDialog(null, &quot;添加失败&quot;);
					&#125;
				&#125; catch (Exception e1) &#123;
					e1.printStackTrace();
				&#125;finally&#123;
					try &#123;
						dbUtil.closeCon(con);
					&#125; catch (Exception e1) &#123;
						e1.printStackTrace();
					&#125;
				&#125;
			&#125;
		&#125;);
		btnNewButton.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
		btnNewButton.setBounds(182, 281, 80, 26);
		jf.getContentPane().add(btnNewButton);

		&#x2F;&#x2F; 初始化重置按钮
		JButton button &#x3D; new JButton(&quot;重置&quot;);
		button.addActionListener(new ActionListener() &#123;
			public void actionPerformed(ActionEvent e) &#123;
				reset(); &#x2F;&#x2F; 清空数据
			&#125;
		&#125;);
		button.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
		button.setBounds(360, 281, 80, 26);
		jf.getContentPane().add(button);

		&#x2F;&#x2F; 初始化类别详细信息所需要的文本域组件
		textArea &#x3D; new JTextArea();
		textArea.setColumns(20);
		textArea.setRows(5);
		textArea.setBackground(Color.WHITE);
		textArea.setBounds(197, 109, 241, 132);
		jf.getContentPane().add(textArea);


		&#x2F;&#x2F; 初始化展示背景图片所需要的JLabel
		JLabel lblNewLabel &#x3D; new JLabel(&quot;&quot;);
		lblNewLabel.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;6.png&quot;));
		lblNewLabel.setBounds(0, 0, 584, 370);
		jf.getContentPane().add(lblNewLabel);

		&#x2F;&#x2F; 创建菜单栏组件
		JMenuBar menuBar &#x3D; new JMenuBar();
		jf.setJMenuBar(menuBar);

		&#x2F;&#x2F; 添加类别管理
		JMenu mnNewMenu &#x3D; new JMenu(&quot;类别管理&quot;);
		menuBar.add(mnNewMenu);

		&#x2F;&#x2F; 添加类别添加菜单项
		JMenuItem mntmNewMenuItem &#x3D; new JMenuItem(&quot;类别添加&quot;);
		mnNewMenu.add(mntmNewMenuItem);

		&#x2F;&#x2F; 添加类别修改菜单项
		JMenuItem mntmNewMenuItem_1 &#x3D; new JMenuItem(&quot;类别修改&quot;);
		mntmNewMenuItem_1.addMouseListener(new MouseAdapter() &#123;
			public void mousePressed(MouseEvent evt) &#123;
				jf.dispose();
				new AdminBTypeEdit();
			&#125;
		&#125;);
		mnNewMenu.add(mntmNewMenuItem_1);

		&#x2F;&#x2F; 添加书籍管理菜单
		JMenu mnNewMenu_2 &#x3D; new JMenu(&quot;书籍管理&quot;);
		menuBar.add(mnNewMenu_2);

		&#x2F;&#x2F; 添加书籍添加菜单
		JMenuItem mntmNewMenuItem_2 &#x3D; new JMenuItem(&quot;书籍添加&quot;);
		mntmNewMenuItem_2.addMouseListener(new MouseAdapter() &#123;
			public void mousePressed(MouseEvent evt) &#123;
				jf.dispose();
				new AdminBookAdd();
			&#125;
		&#125;);
		mnNewMenu_2.add(mntmNewMenuItem_2);

		&#x2F;&#x2F;添加书籍修改菜单
		JMenuItem mntmNewMenuItem_3 &#x3D; new JMenuItem(&quot;书籍修改&quot;);
		mntmNewMenuItem_3.addMouseListener(new MouseAdapter() &#123;
			public void mousePressed(MouseEvent evt) &#123;
				jf.dispose();
				new AdminBookEdit();
			&#125;
		&#125;);
		mnNewMenu_2.add(mntmNewMenuItem_3);

		&#x2F;&#x2F; 添加用户管理菜单
		JMenu menu1 &#x3D; new JMenu(&quot;用户管理&quot;);
		menuBar.add(menu1);

		&#x2F;&#x2F; 添加用户信息菜单
		JMenuItem mntmNewMenuItem_4 &#x3D; new JMenuItem(&quot;用户信息&quot;);
		mntmNewMenuItem_4.addMouseListener(new MouseAdapter() &#123;
			public void mousePressed(MouseEvent evt) &#123;
				jf.dispose();
				new AdminUserInfo();
			&#125;
		&#125;);
		menu1.add(mntmNewMenuItem_4);

		&#x2F;&#x2F; 添加借阅信息菜单
		JMenuItem mntmNewMenuItem_5 &#x3D; new JMenuItem(&quot;借阅信息&quot;);
		mntmNewMenuItem_5.addMouseListener(new MouseAdapter() &#123;
			public void mousePressed(MouseEvent evt) &#123;
				jf.dispose();
				new AdminBorrowInfo();
			&#125;
		&#125;);
		menu1.add(mntmNewMenuItem_5);

		&#x2F;&#x2F; 添加退出系统菜单
		JMenu mnNewMenu_1 &#x3D; new JMenu(&quot;退出系统&quot;);
		mnNewMenu_1.addMouseListener(new MouseAdapter() &#123;
			public void mousePressed(MouseEvent evt) &#123;
				JOptionPane.showMessageDialog(null, &quot;欢迎再次使用&quot;);
				jf.dispose();
			&#125;
		&#125;);
		menuBar.add(mnNewMenu_1);

		&#x2F;&#x2F; 让jf显示，并且可以更改jf大小
		jf.setVisible(true);
		jf.setResizable(true);
	&#125;
	&#x2F;&#x2F; 清空类别数据
	public void reset() &#123;
		textField.setText(&quot;&quot;);
		textArea.setText(&quot;&quot;);
	&#125;

	public static void main(String[] args) &#123;
		try &#123;
			BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
			BeautyEyeLNFHelper.launchBeautyEyeLNF();
		&#125; catch (Exception e) &#123;
			e.printStackTrace();
		&#125;
		new AdminMenuFrm();
	&#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="9-2-图书的添加"><a href="#9-2-图书的添加" class="headerlink" title="9.2 图书的添加"></a>9.2 图书的添加</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.sql.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;

import com.hechaodong.bookmanager.dao.BookTypeDao;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import com.hechaodong.bookmanager.dao.BookDao;
import com.hechaodong.bookmanager.model.Book;
import com.hechaodong.bookmanager.model.BookType;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;

import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.border.TitledBorder;

import java.awt.Color;

import javax.swing.JLabel;

import java.awt.Font;

import javax.swing.JTextField;
import javax.swing.JButton;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.math.BigDecimal;
import java.sql.ResultSet;

import javax.swing.JComboBox;
import javax.swing.ImageIcon;


public class AdminBookAdd extends JFrame &#123;

    private JFrame jf;
    private JTextField textField;
    private JTextField textField_1;
    private JTextField textField_2;
    private JTextField textField_3;
    private JTextField textField_4;
    private JTextField textField_6;
    private JComboBox comboBox;
    BookDao bookDao &#x3D; new BookDao();
    DbUtil dbUtil &#x3D; new DbUtil();
    BookTypeDao bookTypeDao &#x3D; new BookTypeDao();

    public AdminBookAdd() &#123;
        &#x2F;&#x2F; 初始化书籍添加界面
        jf &#x3D; new JFrame(&quot;书籍添加&quot;);
        jf.setBounds(650, 250, 600, 378);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.getContentPane().setLayout(null);

        &#x2F;&#x2F; 顶部展示“书籍添加”的JLabel
        JPanel panel &#x3D; new JPanel();
        panel.setBorder(new TitledBorder(null, &quot;书籍添加&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, Color.RED));
        panel.setBounds(23, 21, 540, 275);
        jf.getContentPane().add(panel);
        panel.setLayout(null);

        &#x2F;&#x2F; 初始化展示“书名”的JLabel
        JLabel lblNewLabel &#x3D; new JLabel(&quot;书名：&quot;);
        lblNewLabel.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        lblNewLabel.setBounds(58, 31, 45, 27);
        panel.add(lblNewLabel);

        &#x2F;&#x2F; 初始化输入书名的文本框组件
        textField &#x3D; new JTextField();
        textField.setBounds(101, 31, 129, 27);
        panel.add(textField);
        textField.setColumns(10);

        &#x2F;&#x2F; 初始化展示“作者”的JLabel
        JLabel label &#x3D; new JLabel(&quot;作者：&quot;);
        label.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label.setBounds(294, 31, 45, 27);
        panel.add(label);

        &#x2F;&#x2F; 初始化输入作者的文本框组件
        textField_1 &#x3D; new JTextField();
        textField_1.setColumns(10);
        textField_1.setBounds(338, 31, 128, 27);
        panel.add(textField_1);

        &#x2F;&#x2F; 初始化展示“出版社”的JLabel
        JLabel label_1 &#x3D; new JLabel(&quot;出版社：&quot;);
        label_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_1.setBounds(43, 79, 60, 27);
        panel.add(label_1);

        &#x2F;&#x2F; 初始化输入出版社的文本框组件
        textField_2 &#x3D; new JTextField();
        textField_2.setColumns(10);
        textField_2.setBounds(101, 79, 129, 27);
        panel.add(textField_2);


        &#x2F;&#x2F; 初始化展示“库存”的JLabel
        JLabel label_2 &#x3D; new JLabel(&quot;库存：&quot;);
        label_2.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_2.setBounds(58, 125, 45, 27);
        panel.add(label_2);

        &#x2F;&#x2F; 初始化输入库存的文本框组件
        textField_3 &#x3D; new JTextField();
        textField_3.setColumns(10);
        textField_3.setBounds(101, 125, 129, 27);
        panel.add(textField_3);

        &#x2F;&#x2F; 初始化展示“价格”的JLabel
        JLabel label_3 &#x3D; new JLabel(&quot;价格：&quot;);
        label_3.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_3.setBounds(294, 79, 45, 27);
        panel.add(label_3);

        &#x2F;&#x2F; 初始化输入价格的文本框组件
        textField_4 &#x3D; new JTextField();
        textField_4.setColumns(10);
        textField_4.setBounds(337, 79, 129, 27);
        panel.add(textField_4);

        &#x2F;&#x2F; 初始化展示“类别”的JLabel
        JLabel label_4 &#x3D; new JLabel(&quot;类别：&quot;);
        label_4.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_4.setBounds(294, 125, 45, 27);
        panel.add(label_4);

        &#x2F;&#x2F; 初始化展示“描述”的JLabel
        JLabel label_5 &#x3D; new JLabel(&quot;描述：&quot;);
        label_5.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_5.setBounds(58, 170, 45, 27);
        panel.add(label_5);

        &#x2F;&#x2F; 初始化输入描述的文本框组件
        textField_6 &#x3D; new JTextField();
        textField_6.setColumns(10);
        textField_6.setBounds(101, 173, 365, 27);
        panel.add(textField_6);

        &#x2F;&#x2F; 添加按钮
        JButton btnNewButton &#x3D; new JButton(&quot;添加&quot;);
        &#x2F;&#x2F; 给添加按钮添加一个动作监听器
        btnNewButton.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                String bookName &#x3D; textField.getText();
                String author &#x3D; textField_1.getText();
                String publish &#x3D; textField_2.getText();
                String priceStr &#x3D; textField_4.getText();
                String numberStr &#x3D; textField_3.getText();
                String remark &#x3D; textField_6.getText();
                if (ToolUtil.isEmpty(bookName) || ToolUtil.isEmpty(author)
                        || ToolUtil.isEmpty(publish) || ToolUtil.isEmpty(priceStr)
                        || ToolUtil.isEmpty(numberStr) || ToolUtil.isEmpty(remark)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请输入相关内容&quot;);
                    return;
                &#125;
                BookType selectedItem &#x3D; (BookType) comboBox.getSelectedItem();
                Integer typeId &#x3D; selectedItem.getTypeId();
                int number;
                double price;
                try &#123;
                    number &#x3D; Integer.parseInt(numberStr);
                    price &#x3D; new BigDecimal(priceStr).setScale(2, BigDecimal.ROUND_DOWN)
                            .doubleValue();
                &#125; catch (Exception e1) &#123;
                    JOptionPane.showMessageDialog(null, &quot;参数错误&quot;);
                    return;
                &#125;

                &#x2F;&#x2F; 封装数据
                Book book &#x3D; new Book();
                book.setBookName(bookName);
                book.setAuthor(author);
                book.setBookTypeId(typeId);
                book.setNumber(number);
                book.setPrice(price);
                book.setPublish(publish);
                book.setRemark(remark);
                book.setStatus(1);
                Connection con &#x3D; null;
                try &#123;
                    con &#x3D; dbUtil.getConnection();
                    int i &#x3D; bookDao.add(con, book);
                    if (i &#x3D;&#x3D; 1) &#123;
                        JOptionPane.showMessageDialog(null, &quot;添加成功&quot;);
                        reset();
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;添加失败&quot;);
                    &#125;
                &#125; catch (Exception e1) &#123;
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(null, &quot;添加异常&quot;);
                &#125;
            &#125;
        &#125;);
        btnNewButton.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        btnNewButton.setBounds(124, 227, 77, 27);
        panel.add(btnNewButton);

        &#x2F;&#x2F; 重置按钮
        JButton button &#x3D; new JButton(&quot;重置&quot;);
        button.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                reset();
            &#125;
        &#125;);
        button.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        button.setBounds(329, 229, 77, 27);
        panel.add(button);

        &#x2F;&#x2F; 类别 文本下拉框
        comboBox &#x3D; new JComboBox();
        comboBox.setBounds(338, 126, 128, 26);
        panel.add(comboBox);

        &#x2F;&#x2F; 背景图片
        JLabel lblNewLabel_1 &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel_1.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;4.png&quot;));
        lblNewLabel_1.setBounds(0, -4, 584, 323);
        jf.getContentPane().add(lblNewLabel_1);
        getBookType();

        &#x2F;&#x2F; 初始化菜单栏
        JMenuBar menuBar &#x3D; new JMenuBar();
        jf.setJMenuBar(menuBar);

        JMenu mnNewMenu &#x3D; new JMenu(&quot;类别管理&quot;);
        menuBar.add(mnNewMenu);

        JMenuItem mntmNewMenuItem &#x3D; new JMenuItem(&quot;类别添加&quot;);
        mntmNewMenuItem.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminMenuFrm();
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem);

        JMenuItem mntmNewMenuItem_1 &#x3D; new JMenuItem(&quot;类别修改&quot;);
        mntmNewMenuItem_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBTypeEdit();
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem_1);

        JMenu mnNewMenu_2 &#x3D; new JMenu(&quot;书籍管理&quot;);
        menuBar.add(mnNewMenu_2);

        JMenuItem mntmNewMenuItem_2 &#x3D; new JMenuItem(&quot;书籍添加&quot;);
        mnNewMenu_2.add(mntmNewMenuItem_2);

        JMenuItem mntmNewMenuItem_3 &#x3D; new JMenuItem(&quot;书籍修改&quot;);
        mntmNewMenuItem_3.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookEdit();
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_3);

        JMenu menu1 &#x3D; new JMenu(&quot;用户管理&quot;);
        menuBar.add(menu1);

        JMenuItem mntmNewMenuItem_4 &#x3D; new JMenuItem(&quot;用户信息&quot;);
        mntmNewMenuItem_4.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminUserInfo();
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_4);

        JMenuItem mntmNewMenuItem_5 &#x3D; new JMenuItem(&quot;借阅信息&quot;);
        mntmNewMenuItem_5.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBorrowInfo();
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_5);

        JMenu mnNewMenu_1 &#x3D; new JMenu(&quot;退出系统&quot;);
        mnNewMenu_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                JOptionPane.showMessageDialog(null, &quot;欢迎再次使用&quot;);
                jf.dispose();
            &#125;
        &#125;);
        menuBar.add(mnNewMenu_1);


        jf.setVisible(true);
        jf.setResizable(true);
    &#125;

    &#x2F;&#x2F; 清空数据
    public void reset() &#123;
        textField.setText(&quot;&quot;);
        textField_1.setText(&quot;&quot;);
        textField_2.setText(&quot;&quot;);
        textField_3.setText(&quot;&quot;);
        textField_4.setText(&quot;&quot;);
        textField_6.setText(&quot;&quot;);

    &#125;

    public void getBookType() &#123;

        &#x2F;&#x2F; 获取连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            ResultSet list &#x3D; bookTypeDao.list(con, new BookType());
            while (list.next()) &#123;
                BookType bookType &#x3D; new BookType();
                bookType.setTypeId(list.getInt(&quot;id&quot;));
                bookType.setTypeName(list.getString(&quot;type_name&quot;));
                comboBox.addItem(bookType);
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;


    &#125;

    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new AdminBookAdd();
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="9-3-图书信息的修改"><a href="#9-3-图书信息的修改" class="headerlink" title="9.3 图书信息的修改"></a>9.3 图书信息的修改</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.sql.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;

import com.hechaodong.bookmanager.dao.BookTypeDao;
import com.hechaodong.bookmanager.model.BookType;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import com.hechaodong.bookmanager.dao.BookDao;
import com.hechaodong.bookmanager.model.Book;

import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;

import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.border.TitledBorder;
import javax.swing.table.DefaultTableModel;

import java.awt.Color;

import javax.swing.JLabel;
import javax.swing.JComboBox;

import java.awt.Font;
import java.math.BigDecimal;
import java.sql.ResultSet;
import java.util.Vector;

import javax.swing.JTextField;
import javax.swing.JButton;
import javax.swing.UIManager;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.ImageIcon;

public class AdminBookEdit extends JFrame &#123;

    private JFrame jf;
    private JTextField textField;
    private JTable table;
    private DefaultTableModel model;
    private JTextField textField_1;
    private JTextField textField_2;
    private JTextField textField_3;
    private JTextField textField_4;
    private JTextField textField_5;
    private JTextField textField_6;
    private JTextField textField_7;

    private JComboBox comboBox;
    private JComboBox comboBox_1;
    private JComboBox comboBox_2;

    private DbUtil dbUtil &#x3D; new DbUtil();
    private BookDao bookDao &#x3D; new BookDao();
    private BookTypeDao bookTypeDao &#x3D; new BookTypeDao();

    public AdminBookEdit() &#123;

        &#x2F;&#x2F; 初始化书籍修改界面
        jf &#x3D; new JFrame(&quot;书籍修改&quot;);
        jf.setBounds(650, 250, 600, 672);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        &#x2F;&#x2F; 初始化菜单栏
        JMenuBar menuBar &#x3D; new JMenuBar();
        jf.setJMenuBar(menuBar);

        &#x2F;&#x2F; 类别管理
        JMenu mnNewMenu &#x3D; new JMenu(&quot;类别管理&quot;);
        menuBar.add(mnNewMenu);

        JMenuItem mntmNewMenuItem &#x3D; new JMenuItem(&quot;类别添加&quot;);
        mntmNewMenuItem.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminMenuFrm();
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem);

        JMenuItem mntmNewMenuItem_1 &#x3D; new JMenuItem(&quot;类别修改&quot;);
        mntmNewMenuItem_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBTypeEdit();
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem_1);


        &#x2F;&#x2F; 书籍管理
        JMenu mnNewMenu_2 &#x3D; new JMenu(&quot;书籍管理&quot;);
        menuBar.add(mnNewMenu_2);

        JMenuItem mntmNewMenuItem_2 &#x3D; new JMenuItem(&quot;书籍添加&quot;);
        mntmNewMenuItem_2.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookAdd();
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_2);

        JMenuItem mntmNewMenuItem_3 &#x3D; new JMenuItem(&quot;书籍修改&quot;);
        mnNewMenu_2.add(mntmNewMenuItem_3);

        &#x2F;&#x2F; 用户管理
        JMenu menu1 &#x3D; new JMenu(&quot;用户管理&quot;);
        menuBar.add(menu1);

        JMenuItem mntmNewMenuItem_4 &#x3D; new JMenuItem(&quot;用户信息&quot;);
        mntmNewMenuItem_4.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminUserInfo();
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_4);

        JMenuItem mntmNewMenuItem_5 &#x3D; new JMenuItem(&quot;借阅信息&quot;);
        mntmNewMenuItem_5.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBorrowInfo();
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_5);


        &#x2F;&#x2F; 退出系统
        JMenu mnNewMenu_1 &#x3D; new JMenu(&quot;退出系统&quot;);
        mnNewMenu_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                JOptionPane.showMessageDialog(null, &quot;欢迎再次使用&quot;);
                jf.dispose();
            &#125;
        &#125;);
        menuBar.add(mnNewMenu_1);
        jf.getContentPane().setLayout(null);

        &#x2F;&#x2F; 顶部展示“书目查询”的JLabel
        JPanel panel &#x3D; new JPanel();
        panel.setBorder(new TitledBorder(null, &quot;书目查询&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, Color.RED));
        panel.setBounds(20, 10, 541, 78);
        jf.getContentPane().add(panel);
        panel.setLayout(null);

        &#x2F;&#x2F; 下拉框选项
        comboBox &#x3D; new JComboBox();
        comboBox.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        comboBox.setBounds(55, 28, 109, 24);
        comboBox.addItem(&quot;书籍名称&quot;);
        comboBox.addItem(&quot;书籍作者&quot;);
        panel.add(comboBox);

        &#x2F;&#x2F; 初始化查询所对应的文本框
        textField &#x3D; new JTextField();
        textField.setBounds(185, 28, 146, 24);
        panel.add(textField);
        textField.setColumns(10);

        &#x2F;&#x2F; 查询按钮
        JButton btnNewButton &#x3D; new JButton(&quot;查询&quot;);
        btnNewButton.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                int index &#x3D; comboBox.getSelectedIndex();
                if (index &#x3D;&#x3D; 0) &#123;
                    String bookName &#x3D; textField.getText();
                    Book book &#x3D; new Book();
                    book.setBookName(bookName);
                    putDates(book);
                &#125; else &#123;
                    String authoerName &#x3D; textField.getText();
                    Book book &#x3D; new Book();
                    book.setAuthor(authoerName);
                    putDates(book);
                &#125;
            &#125;
        &#125;);
        btnNewButton.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        btnNewButton.setBounds(352, 28, 81, 25);
        panel.add(btnNewButton);


        &#x2F;&#x2F; 中部展示“书籍信息”的JLabel
        JPanel panel_1 &#x3D; new JPanel();
        panel_1.setLayout(null);
        panel_1.setBorder(new TitledBorder(UIManager.getBorder(&quot;TitledBorder.border&quot;), &quot;书籍信息&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, new Color(255, 0, 0)));
        panel_1.setBounds(20, 105, 541, 195);

        &#x2F;&#x2F; 表头栏数据  一位数组
        String[] title &#x3D; &#123;&quot;编号&quot;, &quot;书名&quot;, &quot;类别&quot;, &quot;作者&quot;, &quot;价格&quot;, &quot;库存&quot;, &quot;状态&quot;&#125;;
        &#x2F;&#x2F; 具体的各栏行记录 先用空的二位数组占位
        String[][] dates &#x3D; &#123;&#125;;

        &#x2F;&#x2F; 创建数据模型，实例化上面2个控件对象
        model &#x3D; new DefaultTableModel(dates, title);
        table &#x3D; new JTable(model);

        &#x2F;&#x2F; 获取数据库数据放置table中
        putDates(new Book());
        panel_1.setLayout(null);
        JScrollPane jscrollpane &#x3D; new JScrollPane();
        jscrollpane.setBounds(20, 22, 496, 154);
        jscrollpane.setViewportView(table);
        panel_1.add(jscrollpane);
        jf.getContentPane().add(panel_1);

        &#x2F;&#x2F; 给表格添加一个鼠标监听器
        table.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                tableMousePressed(evt);
            &#125;
        &#125;);

        &#x2F;&#x2F; 创建一个Panel对象
        JPanel panel_2 &#x3D; new JPanel();
        panel_2.setBounds(20, 310, 541, 292);
        jf.getContentPane().add(panel_2);
        panel_2.setLayout(null);

        &#x2F;&#x2F; 初始化展示“编号”的JLabel
        JLabel label &#x3D; new JLabel(&quot;编号：&quot;);
        label.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label.setBounds(58, 10, 45, 27);
        panel_2.add(label);

        &#x2F;&#x2F; 初始化输入编号的文本框组件
        textField_1 &#x3D; new JTextField();
        textField_1.setColumns(10);
        textField_1.setBounds(101, 10, 129, 27);
        panel_2.add(textField_1);

        &#x2F;&#x2F; 初始化展示“书名”的JLabel
        JLabel label_1 &#x3D; new JLabel(&quot;书名：&quot;);
        label_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_1.setBounds(294, 10, 45, 27);
        panel_2.add(label_1);

        &#x2F;&#x2F; 初始化输入书名的文本框组件
        textField_2 &#x3D; new JTextField();
        textField_2.setColumns(10);
        textField_2.setBounds(338, 10, 128, 27);
        panel_2.add(textField_2);

        &#x2F;&#x2F; 初始化展示“作者”的JLabel
        JLabel label_2 &#x3D; new JLabel(&quot;作者：&quot;);
        label_2.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_2.setBounds(58, 58, 45, 27);
        panel_2.add(label_2);

        &#x2F;&#x2F; 初始化输入作者的文本框组件
        textField_3 &#x3D; new JTextField();
        textField_3.setColumns(10);
        textField_3.setBounds(101, 58, 129, 27);
        panel_2.add(textField_3);

        &#x2F;&#x2F; 价格 JLabel
        JLabel label_3 &#x3D; new JLabel(&quot;价格：&quot;);
        label_3.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_3.setBounds(58, 104, 45, 27);
        panel_2.add(label_3);

        textField_4 &#x3D; new JTextField();
        textField_4.setColumns(10);
        textField_4.setBounds(101, 104, 129, 27);
        panel_2.add(textField_4);

        &#x2F;&#x2F; 出版 JLabel
        JLabel label_4 &#x3D; new JLabel(&quot;出版：&quot;);
        label_4.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_4.setBounds(294, 58, 45, 27);
        panel_2.add(label_4);

        textField_5 &#x3D; new JTextField();
        textField_5.setColumns(10);
        textField_5.setBounds(337, 58, 129, 27);
        panel_2.add(textField_5);

        &#x2F;&#x2F; 类别 JLabel
        JLabel label_5 &#x3D; new JLabel(&quot;类别：&quot;);
        label_5.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_5.setBounds(58, 189, 45, 27);
        panel_2.add(label_5);

        &#x2F;&#x2F; “类别”下拉选择框
        comboBox_1 &#x3D; new JComboBox();
        comboBox_1.setBounds(102, 190, 128, 26);

        &#x2F;&#x2F;获取类别
        getBookType();
        panel_2.add(comboBox_1);


        &#x2F;&#x2F; 库存 JLabel
        JLabel label_6 &#x3D; new JLabel(&quot;库存：&quot;);
        label_6.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_6.setBounds(294, 104, 45, 27);
        panel_2.add(label_6);

        textField_6 &#x3D; new JTextField();
        textField_6.setColumns(10);
        textField_6.setBounds(337, 104, 129, 27);
        panel_2.add(textField_6);

        &#x2F;&#x2F; 描述 JLabel
        JLabel label_7 &#x3D; new JLabel(&quot;描述：&quot;);
        label_7.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_7.setBounds(58, 152, 45, 27);
        panel_2.add(label_7);

        textField_7 &#x3D; new JTextField();
        textField_7.setColumns(10);
        textField_7.setBounds(101, 152, 365, 27);
        panel_2.add(textField_7);


        &#x2F;&#x2F; 状态 JLabel
        JLabel label_8 &#x3D; new JLabel(&quot;状态：&quot;);
        label_8.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_8.setBounds(294, 190, 45, 27);
        panel_2.add(label_8);

        comboBox_2 &#x3D; new JComboBox();
        comboBox_2.setBounds(338, 191, 128, 26);
        comboBox_2.addItem(&quot;上架&quot;);
        comboBox_2.addItem(&quot;下架&quot;);
        panel_2.add(comboBox_2);

		&#x2F;&#x2F; 修改按钮
        JButton btnNewButton_1 &#x3D; new JButton(&quot;修改&quot;);
        btnNewButton_1.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                &#x2F;&#x2F; 获取文本框组件中的相关数据
                String bookName &#x3D; textField_2.getText();
                String author &#x3D; textField_3.getText();
                String priceStr &#x3D; textField_4.getText();
                String publish &#x3D; textField_5.getText();
                String numberStr &#x3D; textField_6.getText();
                String remark &#x3D; textField_7.getText();
                String bookId &#x3D; textField_1.getText();

                &#x2F;&#x2F; 对数据进行校验
                if (ToolUtil.isEmpty(bookId) || ToolUtil.isEmpty(bookName)
                        || ToolUtil.isEmpty(author) || ToolUtil.isEmpty(publish)
                        || ToolUtil.isEmpty(priceStr)
                        || ToolUtil.isEmpty(numberStr) || ToolUtil.isEmpty(remark)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请输入相关内容&quot;);
                    return;
                &#125;

                &#x2F;&#x2F; 获取图书的类别数据
                BookType bookType &#x3D; (BookType) comboBox_1.getSelectedItem();
                Integer typeId &#x3D; bookType.getTypeId();

                int index &#x3D; comboBox_2.getSelectedIndex();

                &#x2F;&#x2F; 对库存数据价格数据进行处理
                int number;
                double price;
                try &#123;
                    number &#x3D; Integer.parseInt(numberStr);
                    price &#x3D; new BigDecimal(priceStr).setScale(2, BigDecimal.ROUND_DOWN).doubleValue();
                &#125; catch (Exception e1) &#123;
                    JOptionPane.showMessageDialog(null, &quot;参数错误&quot;);
                    return;
                &#125;

                &#x2F;&#x2F; 创建Book对象进行数据封装
                Book book &#x3D; new Book();
                book.setBookId(Integer.parseInt(bookId));
                book.setBookName(bookName);
                book.setAuthor(author);
                book.setBookTypeId(typeId);
                book.setNumber(number);
                book.setPrice(price);
                book.setPublish(publish);
                book.setRemark(remark);
                book.setStatus(1);
                &#x2F;&#x2F; 判断上架下架状态
                if (index &#x3D;&#x3D; 0) &#123;
                    book.setStatus(1);
                &#125; else if (index &#x3D;&#x3D; 1) &#123;
                    book.setStatus(2);
                &#125;

                &#x2F;&#x2F; 获取连接对象
                Connection con &#x3D; null;
                try &#123;
                    con &#x3D; dbUtil.getConnection();
                    int i &#x3D; bookDao.update(con, book);

                    &#x2F;&#x2F; 判断
                    if (i &#x3D;&#x3D; 1) &#123;
                        JOptionPane.showMessageDialog(null, &quot;修改成功&quot;);
                        putDates(new Book()); &#x2F;&#x2F;+++++++
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;修改失败&quot;);
                    &#125;
                &#125; catch (Exception e1) &#123;
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(null, &quot;修改异常&quot;);
                &#125; finally &#123;
                    try &#123;
                        dbUtil.closeCon(con);
                    &#125; catch (Exception e1) &#123;
                        e1.printStackTrace();
                    &#125;
                &#125;

                putDates(new Book());
            &#125;
        &#125;);
        &#x2F;&#x2F; 修改按钮
        btnNewButton_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        btnNewButton_1.setBounds(304, 235, 93, 35);
        panel_2.add(btnNewButton_1);

        &#x2F;&#x2F; 背景图片
        JLabel lblNewLabel &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;5.png&quot;));
        lblNewLabel.setBounds(0, 0, 584, 613);
        jf.getContentPane().add(lblNewLabel);

        jf.setVisible(true);
        jf.setResizable(true);
    &#125;

    &#x2F;&#x2F; 获取图书类型
    public void getBookType() &#123;

        &#x2F;&#x2F; 获取连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            ResultSet list &#x3D; bookTypeDao.list(con, new BookType());
            while (list.next()) &#123;
                BookType bookType &#x3D; new BookType();
                bookType.setTypeId(list.getInt(&quot;id&quot;));
                bookType.setTypeName(list.getString(&quot;type_name&quot;));
                System.out.println(bookType);
                &#x2F;*
                 * 添加图书中类别设置
                 * *&#x2F;
                comboBox_1.addItem(bookType);
&#x2F;&#x2F;                comboBox_1.addItem(String.valueOf(bookType.getTypeName()));
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;

    &#x2F;&#x2F;点击表格获取数据
    public void tableMousePressed(MouseEvent evt) &#123;
        int row &#x3D; table.getSelectedRow();
        Integer bookId &#x3D; (Integer) table.getValueAt(row, 0);
        Book book &#x3D; new Book();
        book.setBookId(bookId);

        &#x2F;&#x2F; 获取连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            ResultSet list &#x3D; bookDao.list(con, book);
            if (list.next()) &#123;
                textField_1.setText(list.getString(&quot;id&quot;));
                textField_2.setText(list.getString(&quot;book_name&quot;));
                textField_3.setText(list.getString(&quot;author&quot;));
                textField_5.setText(list.getString(&quot;publish&quot;));
                textField_4.setText(list.getString(&quot;price&quot;));
                textField_6.setText(list.getString(&quot;number&quot;));
                textField_7.setText(list.getString(&quot;remark&quot;));
                int status &#x3D; list.getInt(&quot;status&quot;);
                if (status &#x3D;&#x3D; 1) &#123;
                    comboBox_2.setSelectedIndex(0);
                &#125; else &#123;
                    comboBox_2.setSelectedIndex(1);
                &#125;
                int typeId &#x3D; list.getInt(&quot;type_id&quot;);
                int count &#x3D; comboBox_1.getItemCount();
                for (int i &#x3D; 0; i &lt; count; i++) &#123;
                    BookType bookType &#x3D; (BookType) comboBox_1.getItemAt(i);
                    if (bookType.getTypeId() &#x3D;&#x3D; typeId) &#123;
                        comboBox_1.setSelectedIndex(i);
                    &#125;
                &#125;
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;

    &#x2F;&#x2F; 从数据库中获取数据
    private void putDates(Book book) &#123;
        DefaultTableModel model &#x3D; (DefaultTableModel) table.getModel();
        model.setRowCount(0);
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            ResultSet resultSet &#x3D; bookDao.list(con, book);
            while (resultSet.next()) &#123;
                Vector rowData &#x3D; new Vector();
                rowData.add(resultSet.getInt(&quot;id&quot;));
                rowData.add(resultSet.getString(&quot;book_name&quot;));
                rowData.add(resultSet.getString(&quot;type_name&quot;));
                rowData.add(resultSet.getString(&quot;author&quot;));
                rowData.add(resultSet.getDouble(&quot;price&quot;));
                rowData.add(resultSet.getInt(&quot;number&quot;));
                if (resultSet.getInt(&quot;status&quot;) &#x3D;&#x3D; 1) &#123;
                    rowData.add(&quot;上架&quot;);
                &#125; else &#123;
                    rowData.add(&quot;下架&quot;);
                &#125;
                model.addRow(rowData);
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;

    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new AdminBookEdit();
    &#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="9-4-图书类型的修改"><a href="#9-4-图书类型的修改" class="headerlink" title="9.4 图书类型的修改"></a>9.4 图书类型的修改</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.sql.*;
import java.awt.Color;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.sql.ResultSet;
import java.util.Vector;

import javax.swing.JFrame;

import com.hechaodong.bookmanager.dao.BookTypeDao;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import com.hechaodong.bookmanager.model.BookType;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;

import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.border.TitledBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.JLabel;

import java.awt.Font;

import javax.swing.JTextField;
import javax.swing.JButton;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.ImageIcon;

public class AdminBTypeEdit extends JFrame &#123;
    private JFrame jf;
    private JTable table;
    private DefaultTableModel model;
    private JTextField textField;
    private JTextField textField_1;
    private JTextField textField_2;

    private DbUtil dbUtil &#x3D; new DbUtil();
    private BookTypeDao bookTypeDao &#x3D; new BookTypeDao();

    public AdminBTypeEdit() &#123;

        &#x2F;&#x2F; 初始化类别修改界面
        jf &#x3D; new JFrame(&quot;类别修改&quot;);
        jf.setBounds(650, 250, 611, 472);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.getContentPane().setLayout(null);

        JMenuBar menuBar &#x3D; new JMenuBar();
        jf.setJMenuBar(menuBar);

        JMenu mnNewMenu &#x3D; new JMenu(&quot;类别管理&quot;);
        menuBar.add(mnNewMenu);

        JMenuItem mntmNewMenuItem &#x3D; new JMenuItem(&quot;类别添加&quot;);
        mntmNewMenuItem.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminMenuFrm();
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem);

        JMenuItem mntmNewMenuItem_1 &#x3D; new JMenuItem(&quot;类别修改&quot;);
        mnNewMenu.add(mntmNewMenuItem_1);

        JMenu mnNewMenu_2 &#x3D; new JMenu(&quot;书籍管理&quot;);
        menuBar.add(mnNewMenu_2);

        JMenuItem mntmNewMenuItem_2 &#x3D; new JMenuItem(&quot;书籍添加&quot;);
        mntmNewMenuItem_2.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookAdd();
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_2);

        JMenuItem mntmNewMenuItem_3 &#x3D; new JMenuItem(&quot;书籍修改&quot;);
        mntmNewMenuItem_3.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookEdit();
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_3);

        JMenu menu1 &#x3D; new JMenu(&quot;用户管理&quot;);
        menuBar.add(menu1);

        JMenuItem mntmNewMenuItem_4 &#x3D; new JMenuItem(&quot;用户信息&quot;);
        mntmNewMenuItem_4.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminUserInfo();
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_4);

        JMenuItem mntmNewMenuItem_5 &#x3D; new JMenuItem(&quot;借阅信息&quot;);
        mntmNewMenuItem_5.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBorrowInfo();
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_5);

        JMenu mnNewMenu_1 &#x3D; new JMenu(&quot;退出系统&quot;);
        mnNewMenu_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                JOptionPane.showMessageDialog(null, &quot;欢迎再次使用&quot;);
                jf.dispose();
            &#125;
        &#125;);
        menuBar.add(mnNewMenu_1);

        &#x2F;&#x2F; 顶部展示“类别信息”的JLabel
        JPanel panel_1 &#x3D; new JPanel();
        panel_1.setBorder(new TitledBorder(UIManager.getBorder(&quot;TitledBorder.border&quot;), &quot;类别信息&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, new Color(255, 0, 0)));
        panel_1.setBounds(20, 10, 554, 208);

        &#x2F;&#x2F; 表头栏数据
        String[] title &#x3D; &#123;&quot;编号&quot;, &quot;类别名称&quot;, &quot;类别描述&quot;&#125;;
        &#x2F;&#x2F;具体的各栏行记录 先用空的二位数组占位
        String[][] dates &#x3D; &#123;&#125;;

        &#x2F;&#x2F; 创建数据模型，实例化上面2个控件对象
        model &#x3D; new DefaultTableModel(dates, title);
        table &#x3D; new JTable(model);

        &#x2F;&#x2F;获取数据库数据放置table中
        putDates();
        panel_1.setLayout(null);
        JScrollPane jscrollpane &#x3D; new JScrollPane();
        jscrollpane.setBounds(20, 22, 517, 163);
        jscrollpane.setViewportView(table);
        panel_1.add(jscrollpane);
        jf.getContentPane().add(panel_1);

        &#x2F;&#x2F; 底部展示“类别编辑”的JLabel
        JPanel panel &#x3D; new JPanel();
        panel.setBorder(new TitledBorder(null, &quot;类别编辑&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, Color.RED));
        panel.setBounds(20, 228, 554, 168);
        jf.getContentPane().add(panel);
        panel.setLayout(null);

        table.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                typeTableMousePressed(evt);
            &#125;
        &#125;);

        &#x2F;&#x2F; 编号 JLabel
        JLabel lblNewLabel &#x3D; new JLabel(&quot;编号：&quot;);
        lblNewLabel.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        lblNewLabel.setBounds(73, 26, 45, 28);
        panel.add(lblNewLabel);

        &#x2F;&#x2F; 编号 文本框
        textField &#x3D; new JTextField();
        textField.setBounds(116, 30, 92, 24);
        panel.add(textField);
        textField.setColumns(10);

        &#x2F;&#x2F; 类别名称 JLabel
        JLabel label &#x3D; new JLabel(&quot;类别名称：&quot;);
        label.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label.setBounds(238, 26, 75, 28);
        panel.add(label);

        &#x2F;&#x2F; 类别名称 文本框
        textField_1 &#x3D; new JTextField();
        textField_1.setColumns(10);
        textField_1.setBounds(314, 30, 122, 24);
        panel.add(textField_1);

        &#x2F;&#x2F; 描述 JLabel
        JLabel label_1 &#x3D; new JLabel(&quot;描述：&quot;);
        label_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        label_1.setBounds(73, 65, 45, 28);
        panel.add(label_1);

        &#x2F;&#x2F; 描述 文本框
        textField_2 &#x3D; new JTextField();
        textField_2.setColumns(10);
        textField_2.setBounds(116, 69, 320, 24);
        panel.add(textField_2);

        &#x2F;&#x2F; 修改按钮
        JButton btnNewButton &#x3D; new JButton(&quot;修改&quot;);
        &#x2F;&#x2F; 给修改按钮添加一个事件监听器
        btnNewButton.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                &#x2F;&#x2F; 获取信息
                String typeId &#x3D; textField.getText();
                String typeName &#x3D; textField_1.getText();
                String typeRemark &#x3D; textField_2.getText();
                if (ToolUtil.isEmpty(typeName) || ToolUtil.isEmpty(typeRemark)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请输入相关信息&quot;);
                    return;
                &#125;
                &#x2F;&#x2F; 封装数据BookType
                BookType bookType &#x3D; new BookType();
                bookType.setTypeId(Integer.parseInt(typeId));
                bookType.setTypeName(typeName);
                bookType.setRemark(typeRemark);
                &#x2F;&#x2F; 获取连接对象
                Connection con &#x3D; null;
                try &#123;
                    con &#x3D; dbUtil.getConnection();
                    int i &#x3D; bookTypeDao.update(con, bookType);
                    if (i &#x3D;&#x3D; 1) &#123;
                        JOptionPane.showMessageDialog(null, &quot;修改成功&quot;);
                        putDates();
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;修改失败&quot;);
                    &#125;
                &#125; catch (Exception e1) &#123;
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(null, &quot;修改异常&quot;);
                &#125; finally &#123;
                    try &#123;
                        dbUtil.closeCon(con);
                    &#125; catch (Exception e1) &#123;
                        e1.printStackTrace();
                    &#125;
                &#125;
            &#125;
        &#125;);
        btnNewButton.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        btnNewButton.setBounds(128, 117, 93, 28);
        panel.add(btnNewButton);

        &#x2F;&#x2F; 删除按钮
        JButton button &#x3D; new JButton(&quot;删除&quot;);

        &#x2F;&#x2F; 给删除按钮添加事件监听器
        button.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                &#x2F;&#x2F; 获取数据
                String typeId &#x3D; textField.getText();
                if (ToolUtil.isEmpty(typeId)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请选择相关信息&quot;);
                    return;
                &#125;
                &#x2F;&#x2F; 获取连接对象
                Connection con &#x3D; null;
                try &#123;
                    con &#x3D; dbUtil.getConnection();
                    int i &#x3D; bookTypeDao.delete(con, typeId);
                    if (i &#x3D;&#x3D; 1) &#123;
                        JOptionPane.showMessageDialog(null, &quot;删除成功&quot;);
                        putDates();
                    &#125; else if (i &#x3D;&#x3D; 2) &#123;
                        JOptionPane.showMessageDialog(null, &quot;删除失败-类别最少保留一个&quot;);
                    &#125; else if (i &#x3D;&#x3D; 3) &#123;
                        JOptionPane.showMessageDialog(null, &quot;删除失败-该类别下有书籍&quot;);
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;删除失败&quot;);
                    &#125;
                &#125; catch (Exception e1) &#123;
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(null, &quot;删除异常&quot;);
                &#125; finally &#123;
                    try &#123;
                        dbUtil.closeCon(con);
                    &#125; catch (Exception e1) &#123;
                        e1.printStackTrace();
                    &#125;
                &#125;
            &#125;
        &#125;);
        button.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        button.setBounds(314, 117, 93, 28);
        panel.add(button);

        &#x2F;&#x2F; 背景图片
        JLabel lblNewLabel_1 &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel_1.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;5.png&quot;));
        lblNewLabel_1.setBounds(0, 0, 595, 413);
        jf.getContentPane().add(lblNewLabel_1);

        &#x2F;&#x2F; 显示
        jf.setVisible(true);
        jf.setResizable(false);
    &#125;

    &#x2F;&#x2F; 点击表格获取信息
    protected void typeTableMousePressed(MouseEvent evt) &#123;
        int row &#x3D; table.getSelectedRow();
        textField.setText(table.getValueAt(row, 0).toString());
        textField_1.setText(table.getValueAt(row, 1).toString());
        textField_2.setText(table.getValueAt(row, 2).toString());

    &#125;

    &#x2F;&#x2F; 将图书类型信息显示在表格中
    public void putDates() &#123;
        DefaultTableModel model &#x3D; (DefaultTableModel) table.getModel();
        model.setRowCount(0);
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            ResultSet list &#x3D; bookTypeDao.list(con, new BookType());
            while (list.next()) &#123; &#x2F;&#x2F; 遍历&quot;list&quot;对象中的每一行数据，将其转换为一个Vector对象
                Vector rowData &#x3D; new Vector();
                rowData.add(list.getInt(&quot;id&quot;));
                rowData.add(list.getString(&quot;type_name&quot;));
                rowData.add(list.getString(&quot;remark&quot;));
                model.addRow(rowData);
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;

    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new AdminBTypeEdit();
    &#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>







<h2 id="10-用户管理模块"><a href="#10-用户管理模块" class="headerlink" title="10. 用户管理模块"></a>10. 用户管理模块</h2><h3 id="10-1-用户信息"><a href="#10-1-用户信息" class="headerlink" title="10.1 用户信息"></a>10.1 用户信息</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.sql.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;

import com.hechaodong.bookmanager.dao.UserDao;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import com.hechaodong.bookmanager.model.User;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;

import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.border.TitledBorder;
import javax.swing.table.DefaultTableModel;

import java.awt.Color;

import javax.swing.JLabel;

import java.awt.Font;
import java.sql.ResultSet;
import java.util.Vector;

import javax.swing.JTextField;
import javax.swing.JButton;

import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.ImageIcon;

&#x2F;&#x2F; 用户信息
public class AdminUserInfo extends JFrame &#123;
    private JFrame jf;
    private JTextField textField;
    private JTable table;
    private DefaultTableModel model;
    private JTextField textField_1;
    private JTextField textField_2;
    private JTextField textField_3;
    private JTextField textField_4;
    private JTextField textField_5;

    private DbUtil dbUtil &#x3D; new DbUtil();
    private UserDao userDao &#x3D; new UserDao();

    public AdminUserInfo() &#123;
        &#x2F;&#x2F; 初始化用户信息界面
        jf &#x3D; new JFrame(&quot;用户信息&quot;);
        jf.setBounds(650, 250, 600, 516);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.getContentPane().setLayout(null);

        &#x2F;&#x2F; 创建一个菜单栏
        JMenuBar menuBar &#x3D; new JMenuBar();
        jf.setJMenuBar(menuBar);

        JMenu mnNewMenu &#x3D; new JMenu(&quot;类别管理&quot;);
        menuBar.add(mnNewMenu);

        JMenuItem mntmNewMenuItem &#x3D; new JMenuItem(&quot;类别添加&quot;);
        mntmNewMenuItem.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminMenuFrm();&#x2F;&#x2F; 类别添加（默认主界面）
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem);

        JMenuItem mntmNewMenuItem_1 &#x3D; new JMenuItem(&quot;类别修改&quot;);
        mntmNewMenuItem_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBTypeEdit();&#x2F;&#x2F; 类别修改
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem_1);

        JMenu mnNewMenu_2 &#x3D; new JMenu(&quot;书籍管理&quot;);
        menuBar.add(mnNewMenu_2);

        JMenuItem mntmNewMenuItem_2 &#x3D; new JMenuItem(&quot;书籍添加&quot;);
        mntmNewMenuItem_2.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookAdd();&#x2F;&#x2F; 书籍添加
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_2);

        JMenuItem mntmNewMenuItem_3 &#x3D; new JMenuItem(&quot;书籍修改&quot;);
        mntmNewMenuItem_3.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookEdit();&#x2F;&#x2F; 书籍修改
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_3);

        JMenu menu1 &#x3D; new JMenu(&quot;用户管理&quot;);
        menuBar.add(menu1);

        JMenuItem mntmNewMenuItem_4 &#x3D; new JMenuItem(&quot;用户信息&quot;);
        menu1.add(mntmNewMenuItem_4);

        JMenuItem mntmNewMenuItem_5 &#x3D; new JMenuItem(&quot;借阅信息&quot;);
        mntmNewMenuItem_5.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBorrowInfo();&#x2F;&#x2F; 借阅信息
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_5);

        JMenu mnNewMenu_1 &#x3D; new JMenu(&quot;退出系统&quot;);
        mnNewMenu_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                JOptionPane.showMessageDialog(null, &quot;欢迎再次使用&quot;);
                jf.dispose();
            &#125;
        &#125;);
        menuBar.add(mnNewMenu_1);

        &#x2F;&#x2F; 顶部展示“借阅信息”的JLabel
        JPanel panel &#x3D; new JPanel();
        panel.setBorder(new TitledBorder(null, &quot;借阅信息&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, Color.RED));
        panel.setBounds(20, 10, 540, 74);
        jf.getContentPane().add(panel);
        panel.setLayout(null);

        &#x2F;&#x2F; 初始化展示“用户名”的JLabel
        JLabel lblNewLabel &#x3D; new JLabel(&quot;用户名：&quot;);
        lblNewLabel.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        lblNewLabel.setBounds(57, 22, 60, 30);
        panel.add(lblNewLabel);

        &#x2F;&#x2F; 初始化用户名所对应的文本框组件
        textField &#x3D; new JTextField();
        textField.setBounds(127, 27, 155, 25);
        panel.add(textField);
        textField.setColumns(10);

        &#x2F;&#x2F; 查询按钮
        JButton btnNewButton &#x3D; new JButton(&quot;查询&quot;);
        btnNewButton.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
                String userName &#x3D; textField.getText();&#x2F;&#x2F; 获取查询信息
                User user &#x3D; new User();
                user.setUserName(userName);
                putDates(user);
            &#125;
        &#125;);
        btnNewButton.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 14));
        btnNewButton.setBounds(316, 26, 93, 23);
        panel.add(btnNewButton);

        &#x2F;&#x2F; 中部展示”用户信息“的JLabel
        JPanel panel_1 &#x3D; new JPanel();
        panel_1.setLayout(null);
        panel_1.setBorder(new TitledBorder(UIManager.getBorder(&quot;TitledBorder.border&quot;), &quot;用户信息&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, new Color(255, 0, 0)));
        panel_1.setBounds(20, 94, 541, 195);

        &#x2F;&#x2F; 表头栏数据
        String[] title &#x3D; &#123;&quot;编号&quot;, &quot;用户名&quot;, &quot;密码&quot;, &quot;性别&quot;, &quot;电话&quot;&#125;;
        &#x2F;&#x2F; 具体的各栏行记录 先用空的二位数组占位
        String[][] dates &#x3D; &#123;&#125;;

        &#x2F;&#x2F;创建数据模型，实例化上面2个控件对象
        model &#x3D; new DefaultTableModel(dates, title);
        table &#x3D; new JTable(model);

        &#x2F;&#x2F;获取数据库数据放置table中
        putDates(new User());

		&#x2F;&#x2F; 创建JScrollPanel对象
        panel_1.setLayout(null);
        JScrollPane jscrollpane &#x3D; new JScrollPane();
        jscrollpane.setBounds(20, 22, 496, 154);
        jscrollpane.setViewportView(table);
        panel_1.add(jscrollpane);
        jf.getContentPane().add(panel_1);

		&#x2F;&#x2F; 底部展示“用户编辑”的JLabel
        JPanel panel_2 &#x3D; new JPanel();
        panel_2.setBorder(new TitledBorder(null, &quot;用户编辑&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, Color.RED));
        panel_2.setBounds(20, 302, 540, 137);
        jf.getContentPane().add(panel_2);
        panel_2.setLayout(null);

		&#x2F;&#x2F; 编号 JLabel
        JLabel lblNewLabel_1 &#x3D; new JLabel(&quot;编号：&quot;);
        lblNewLabel_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        lblNewLabel_1.setBounds(49, 30, 48, 34);
        panel_2.add(lblNewLabel_1);

		&#x2F;&#x2F; 编号 文本框
        textField_1 &#x3D; new JTextField();
        textField_1.setEditable(false);
        textField_1.setBounds(103, 37, 66, 21);
        panel_2.add(textField_1);
        textField_1.setColumns(10);

		&#x2F;&#x2F; 用户名 JLabel
        JLabel label &#x3D; new JLabel(&quot;用户名：&quot;);
        label.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        label.setBounds(187, 30, 66, 34);
        panel_2.add(label);

		&#x2F;&#x2F; 用户名 文本框
        textField_2 &#x3D; new JTextField();
        textField_2.setColumns(10);
        textField_2.setBounds(259, 37, 93, 21);
        panel_2.add(textField_2);

		&#x2F;&#x2F; 密码 JLabel
        JLabel label_1 &#x3D; new JLabel(&quot;密码：&quot;);
        label_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        label_1.setBounds(383, 30, 48, 34);
        panel_2.add(label_1);

		&#x2F;&#x2F; 密码 文本框
        textField_3 &#x3D; new JTextField();
        textField_3.setColumns(10);
        textField_3.setBounds(437, 37, 93, 21);
        panel_2.add(textField_3);

		&#x2F;&#x2F; 修改按钮
        JButton btnNewButton_1 &#x3D; new JButton(&quot;修改&quot;);

		&#x2F;&#x2F; 给修改按钮添加一个事件监听器
        btnNewButton_1.addActionListener(new ActionListener() &#123;
            public void actionPerformed(ActionEvent e) &#123;
				&#x2F;&#x2F; 获取数据
                String userId &#x3D; textField_1.getText();
                String userName &#x3D; textField_2.getText();
                String password &#x3D; textField_3.getText();
                String sex &#x3D; textField_4.getText();
                String phone &#x3D; textField_5.getText();
                if (ToolUtil.isEmpty(userName)
                        || ToolUtil.isEmpty(password)
                        || ToolUtil.isEmpty(sex) || ToolUtil.isEmpty(phone)) &#123;
                    JOptionPane.showMessageDialog(null, &quot;请输入相关信息&quot;);
                    return;
                &#125;
				&#x2F;&#x2F; 把数据封装到User中
                User user &#x3D; new User();
                user.setUserId(Integer.parseInt(userId));
                user.setUserName(userName);
                user.setPassword(password);
                user.setSex(sex);
                user.setPhone(phone);
				&#x2F;&#x2F; 获取连接对象
                Connection con &#x3D; null;
                try &#123;
                    con &#x3D; dbUtil.getConnection();
                    int i &#x3D; userDao.update(con, user);
                    if (i &#x3D;&#x3D; 1) &#123;
                        JOptionPane.showMessageDialog(null, &quot;修改成功&quot;);
                        putDates(new User());
                    &#125; else &#123;
                        JOptionPane.showMessageDialog(null, &quot;修改失败&quot;);
                    &#125;
                &#125; catch (Exception e1) &#123;
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(null, &quot;修改异常&quot;);
                &#125; finally &#123;
                    try &#123;
                        dbUtil.closeCon(con);
                    &#125; catch (Exception e1) &#123;
                        e1.printStackTrace();
                    &#125;
                &#125;
            &#125;
        &#125;);
        btnNewButton_1.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        btnNewButton_1.setBounds(422, 74, 87, 34);
        panel_2.add(btnNewButton_1);

		&#x2F;&#x2F; 性别 JLabel
        JLabel label_2 &#x3D; new JLabel(&quot;性别：&quot;);
        label_2.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        label_2.setBounds(49, 74, 48, 34);
        panel_2.add(label_2);

		&#x2F;&#x2F; 性别 文本框
        textField_4 &#x3D; new JTextField();
        textField_4.setColumns(10);
        textField_4.setBounds(103, 81, 66, 21);
        panel_2.add(textField_4);

		&#x2F;&#x2F; 手机号 JLabel
        JLabel label_3 &#x3D; new JLabel(&quot;手机号：&quot;);
        label_3.setFont(new Font(&quot;幼圆&quot;, Font.BOLD, 15));
        label_3.setBounds(187, 74, 66, 34);
        panel_2.add(label_3);

		&#x2F;&#x2F; 手机号 文本框
        textField_5 &#x3D; new JTextField();
        textField_5.setColumns(10);
        textField_5.setBounds(259, 81, 93, 21);
        panel_2.add(textField_5);

		&#x2F;&#x2F; 背景图片
        JLabel lblNewLabel_2 &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel_2.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;5.png&quot;));
        lblNewLabel_2.setBounds(0, 0, 584, 457);
        jf.getContentPane().add(lblNewLabel_2);

        table.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                tableMousePressed(evt);
            &#125;
        &#125;);

		&#x2F;&#x2F; 显示，不改变界面大小
        jf.setVisible(true);
        jf.setResizable(false);
    &#125;

    public void tableMousePressed(MouseEvent evt) &#123;
        int row &#x3D; table.getSelectedRow();
        textField_1.setText(table.getValueAt(row, 0).toString());
        textField_2.setText(table.getValueAt(row, 1).toString());
        textField_3.setText(table.getValueAt(row, 2).toString());
        textField_4.setText(table.getValueAt(row, 3).toString());
        textField_5.setText(table.getValueAt(row, 4).toString());
    &#125;

    public void putDates(User user) &#123;
        DefaultTableModel model &#x3D; (DefaultTableModel) table.getModel();
        model.setRowCount(0);
		&#x2F;&#x2F; 获取连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            ResultSet list &#x3D; userDao.list(con, user);
            while (list.next()) &#123;
                Vector rowData &#x3D; new Vector();
                rowData.add(list.getInt(&quot;id&quot;));
                rowData.add(list.getString(&quot;username&quot;));
                rowData.add(list.getString(&quot;password&quot;));
                rowData.add(list.getString(&quot;sex&quot;));
                rowData.add(list.getString(&quot;phone&quot;));
                model.addRow(rowData);
            &#125;

        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;

    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new AdminUserInfo();
    &#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="10-2-借阅信息"><a href="#10-2-借阅信息" class="headerlink" title="10.2 借阅信息"></a>10.2 借阅信息</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.hechaodong.bookmanager.jframe;

import java.sql.*;
import java.awt.Color;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.sql.ResultSet;
import java.util.Vector;

import javax.swing.JFrame;

import com.hechaodong.bookmanager.dao.BorrowDetailDao;
import com.hechaodong.bookmanager.model.BorrowDetail;
import com.hechaodong.bookmanager.utils.DbUtil;
import com.hechaodong.bookmanager.utils.ToolUtil;
import org.jb2011.lnf.beautyeye.BeautyEyeLNFHelper;

import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.border.TitledBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.JLabel;
import javax.swing.ImageIcon;

public class AdminBorrowInfo extends JFrame &#123;
    private JFrame jf;
    private JTable table;
    private DefaultTableModel model;

    private DbUtil dbUtil &#x3D; new DbUtil();
    private BorrowDetailDao borrowDetailDao &#x3D; new BorrowDetailDao();

    public AdminBorrowInfo() &#123;

        &#x2F;&#x2F; 初始化借阅信息界面
        jf &#x3D; new JFrame(&quot;借阅信息&quot;);
        jf.setBounds(650, 250, 610, 441);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.getContentPane().setLayout(null);

        &#x2F;&#x2F; 创建菜单栏
        JMenuBar menuBar &#x3D; new JMenuBar();
        jf.setJMenuBar(menuBar);

        JMenu mnNewMenu &#x3D; new JMenu(&quot;类别管理&quot;);
        menuBar.add(mnNewMenu);

        JMenuItem mntmNewMenuItem &#x3D; new JMenuItem(&quot;类别添加&quot;);
        mntmNewMenuItem.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminMenuFrm();
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem);

        JMenuItem mntmNewMenuItem_1 &#x3D; new JMenuItem(&quot;类别修改&quot;);
        mntmNewMenuItem_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBTypeEdit();
            &#125;
        &#125;);
        mnNewMenu.add(mntmNewMenuItem_1);

        JMenu mnNewMenu_2 &#x3D; new JMenu(&quot;书籍管理&quot;);
        menuBar.add(mnNewMenu_2);

        JMenuItem mntmNewMenuItem_2 &#x3D; new JMenuItem(&quot;书籍添加&quot;);
        mntmNewMenuItem_2.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookAdd();
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_2);

        JMenuItem mntmNewMenuItem_3 &#x3D; new JMenuItem(&quot;书籍修改&quot;);
        mntmNewMenuItem_3.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminBookEdit();
            &#125;
        &#125;);
        mnNewMenu_2.add(mntmNewMenuItem_3);

        JMenu menu1 &#x3D; new JMenu(&quot;用户管理&quot;);
        menuBar.add(menu1);

        JMenuItem mntmNewMenuItem_4 &#x3D; new JMenuItem(&quot;用户信息&quot;);
        mntmNewMenuItem_4.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                jf.dispose();
                new AdminUserInfo();
            &#125;
        &#125;);
        menu1.add(mntmNewMenuItem_4);

        JMenuItem mntmNewMenuItem_5 &#x3D; new JMenuItem(&quot;借阅信息&quot;);
        menu1.add(mntmNewMenuItem_5);

        JMenu mnNewMenu_1 &#x3D; new JMenu(&quot;退出系统&quot;);
        mnNewMenu_1.addMouseListener(new MouseAdapter() &#123;
            public void mousePressed(MouseEvent evt) &#123;
                JOptionPane.showMessageDialog(null, &quot;欢迎再次使用&quot;);
                jf.dispose();
            &#125;
        &#125;);
        menuBar.add(mnNewMenu_1);

        &#x2F;&#x2F; 顶部“借阅信息”的JLabel
        JPanel panel_1 &#x3D; new JPanel();
        panel_1.setBorder(new TitledBorder(UIManager.getBorder(&quot;TitledBorder.border&quot;), &quot;借阅信息&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, new Color(255, 0, 0)));
        panel_1.setBounds(10, 10, 574, 350);

        &#x2F;&#x2F; 表头栏数据
        String[] title &#x3D; &#123;&quot;借书人&quot;, &quot;书名&quot;, &quot;状态&quot;, &quot;借书时间&quot;, &quot;还书时间&quot;&#125;;
        &#x2F;&#x2F; 具体的各栏行记录 先用空的二位数组占位
        String[][] dates &#x3D; &#123;&#125;;

        &#x2F;&#x2F; 创建数据模型，实例化上面2个控件对象*&#x2F;
        model &#x3D; new DefaultTableModel(dates, title);
        table &#x3D; new JTable(model);

        &#x2F;&#x2F;获取数据库数据放置table中
        putDates(new BorrowDetail());
        &#x2F;&#x2F; 借阅信息表格
        panel_1.setLayout(null);
        JScrollPane jscrollpane &#x3D; new JScrollPane();
        jscrollpane.setBounds(20, 22, 538, 314);
        jscrollpane.setViewportView(table);
        panel_1.add(jscrollpane);
        jf.getContentPane().add(panel_1);

        &#x2F;&#x2F; 背景图片
        JLabel lblNewLabel &#x3D; new JLabel(&quot;&quot;);
        lblNewLabel.setIcon(new ImageIcon(&quot;lib&#x2F;images&#x2F;6.png&quot;));
        lblNewLabel.setBounds(0, 0, 584, 379);
        jf.getContentPane().add(lblNewLabel);

        &#x2F;&#x2F; 显示
        jf.setVisible(true);
        jf.setResizable(true);
    &#125;

    &#x2F;&#x2F;
    private void putDates(BorrowDetail borrowDetail) &#123;
        DefaultTableModel model &#x3D; (DefaultTableModel) table.getModel();
        model.setRowCount(0);
        &#x2F;&#x2F; 获取连接对象
        Connection con &#x3D; null;
        try &#123;
            con &#x3D; dbUtil.getConnection();
            ResultSet list &#x3D; borrowDetailDao.list(con, borrowDetail);
            while (list.next()) &#123;
                Vector rowData &#x3D; new Vector();
                rowData.add(list.getString(&quot;username&quot;));
                rowData.add(list.getString(&quot;book_name&quot;));
                int status &#x3D; list.getInt(&quot;status&quot;);
                if (status &#x3D;&#x3D; 1) &#123;
                    rowData.add(&quot;在借&quot;);
                &#125; else &#123;
                    rowData.add(&quot;已还&quot;);
                &#125;
                rowData.add(ToolUtil.getDateByTime(list.getLong(&quot;borrow_time&quot;)));
                if (status &#x3D;&#x3D; 2) &#123;
                    rowData.add(ToolUtil.getDateByTime(list.getLong(&quot;return_time&quot;)));
                &#125;
                model.addRow(rowData);
            &#125;
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125; finally &#123;
            try &#123;
                dbUtil.closeCon(con);
            &#125; catch (Exception e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;

    public static void main(String[] args) &#123;
        try &#123;
            BeautyEyeLNFHelper.frameBorderStyle &#x3D; BeautyEyeLNFHelper.FrameBorderStyle.generalNoTranslucencyShadow;
            BeautyEyeLNFHelper.launchBeautyEyeLNF();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
        new AdminBorrowInfo();
    &#125;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>








                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">苦逼小码农</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://spicypig.top/2023/07/03/bookmanager/">https://spicypig.top/2023/07/03/bookmanager/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">苦逼小码农</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Swing/">
                                    <span class="chip bg-color">Swing</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'KtBdvsKWSVJIp3z2FUsb69mq-gzGzoHsz',
        appKey: '50FNJTYtIZbAWyuLqPnfKML9',
        serverURLs: 'https://ktbdvskw.lc-cn-n1-shared.com',
        notify: 'true' === 'true',
        verify: 'true' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!'
    });
</script>

<!--酷Q推送-->


    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/08/01/git/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="Git">
                        
                        <span class="card-title">Git</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-08-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/TOOL/" class="post-category">
                                    TOOL
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Git/">
                        <span class="chip bg-color">Git</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/06/04/reflect/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="反射">
                        
                        <span class="card-title">反射</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-06-04
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java/" class="post-category">
                                    Java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%8F%8D%E5%B0%84/">
                        <span class="chip bg-color">反射</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('50')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Spicy-pig<br />'
            + '文章作者: 苦逼小码农<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归sipcypig所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023</span>
            
            <a href="/about" target="_blank">苦逼小码农</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2023";
                        var startMonth = "5";
                        var startDate = "9";
                        var startHour = "12";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
                <span id="icp"><img src="/medias/icp.png"
                                    style="vertical-align: text-bottom;"/>
                <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">滇ICP备2023003437号</a>
            </span>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/pigcct" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:762405236@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=762405236" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 762405236" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    


    <!--动态线条背景-->
    <script type="text/javascript"
    color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>

    <!--人体时钟背景透明-->
    <!-- <script charset="Shift_JIS" src="http://chabudai.sakura.ne.jp/blogparts/honehoneclock/honehone_clock_tr.js"></script> -->

    <!--人体时钟背景白-->
    <!-- <script charset="Shift_JIS" src="http://chabudai.sakura.ne.jp/blogparts/honehoneclock/honehone_clock_wh.js"></script> -->



    <!-- 数字雨 -->
    <!-- <canvas id="canvas" width="1440" height="900" ></canvas>
    <script type="text/javascript" src="/js/DigitalRain.js"></script> -->

    
    <!--浏览器搞笑标题-->
    <script type="text/javascript" src="/js/FunnyTitle.js"></script>

        
    <!--单击显示文字-->
    <!-- <script type="text/javascript" src="/js/click_show_text.js"></script> -->


    <!-- 添加鼠标点击烟花爆炸效果 -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks1.js"></script>


    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="60"
        src="/libs/background/canvas-nest.js"></script>
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>
